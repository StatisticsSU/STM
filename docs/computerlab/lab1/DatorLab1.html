<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mattias Villani">
<meta name="dcterms.date" content="2023-07-24">

<title>STM - Statistik och dataanalys I, 15 hp</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//misc/favicons/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../misc/SU_logo_small.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">STM</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">STM</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../coding.qmd">
 <span class="menu-text">programming</span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#introduktion" id="toc-introduktion" class="nav-link active" data-scroll-target="#introduktion">Introduktion</a></li>
  <li><a href="#använda-r-som-en-miniräknare" id="toc-använda-r-som-en-miniräknare" class="nav-link" data-scroll-target="#använda-r-som-en-miniräknare">1. Använda R som en miniräknare</a></li>
  <li><a href="#använda-variabler-i-r" id="toc-använda-variabler-i-r" class="nav-link" data-scroll-target="#använda-variabler-i-r">2. Använda variabler i R</a></li>
  <li><a href="#organisera-dig-med-filmappar" id="toc-organisera-dig-med-filmappar" class="nav-link" data-scroll-target="#organisera-dig-med-filmappar">3. Organisera dig med filmappar</a></li>
  <li><a href="#använda-editorn-source-för-att-spara-kod" id="toc-använda-editorn-source-för-att-spara-kod" class="nav-link" data-scroll-target="#använda-editorn-source-för-att-spara-kod">4. Använda Editorn (Source) för att spara kod</a></li>
  <li><a href="#ställa-in-arbetsmappen-working-directory-i-r" id="toc-ställa-in-arbetsmappen-working-directory-i-r" class="nav-link" data-scroll-target="#ställa-in-arbetsmappen-working-directory-i-r">5. Ställa in arbetsmappen (working directory) i R</a></li>
  <li><a href="#läsa-in-data-från-fil" id="toc-läsa-in-data-från-fil" class="nav-link" data-scroll-target="#läsa-in-data-från-fil">6. Läsa in data från fil</a></li>
  <li><a href="#analysera-data" id="toc-analysera-data" class="nav-link" data-scroll-target="#analysera-data">7. Analysera data</a></li>
  <li><a href="#några-extra-tips" id="toc-några-extra-tips" class="nav-link" data-scroll-target="#några-extra-tips">8. Några extra tips</a></li>
  <li><a href="#datastrukturer" id="toc-datastrukturer" class="nav-link" data-scroll-target="#datastrukturer">9. Datastrukturer</a></li>
  <li><a href="#funktioner" id="toc-funktioner" class="nav-link" data-scroll-target="#funktioner">10. Funktioner</a></li>
  <li><a href="#tre-dialekter-av-r" id="toc-tre-dialekter-av-r" class="nav-link" data-scroll-target="#tre-dialekter-av-r">11. Tre dialekter av R</a></li>
  <li><a href="#sammanfattning" id="toc-sammanfattning" class="nav-link" data-scroll-target="#sammanfattning">12. Sammanfattning</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Statistik och dataanalys I, 15 hp</h1>
<p class="subtitle lead">Datorlaboration 1</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mattias Villani </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 24, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<hr>
<section id="introduktion" class="level2">
<h2 class="anchored" data-anchor-id="introduktion">Introduktion</h2>
<blockquote class="blockquote">
<p>I den här första datorlabben kommer ni bekanta er med programmeringsspråket <strong>R</strong> och dess arbetsmiljö <strong>RStudio</strong>.</p>
</blockquote>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Ta det lugnt
</div>
</div>
<div class="callout-body-container callout-body">
<blockquote class="blockquote">
<p>Det är <strong>många</strong> nya saker som presenteras i den här datorlaborationen, så var beredd på att inte allt kommer att sjunka in direkt. Försök att ta dig igenom hela texten, och övningarna. Du kan sen återkomma till denna labb på andra datorlaborationer för att repetera de delar du behöver.<br> Ok, ta ett djupt andetag så börjar vi.</p>
</blockquote>
</div>
</div>
<div class="callout-info callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Instruktioner
</div>
</div>
<div class="callout-body-container callout-body">
<p>💪 Avsnitt med den här symbolen är uppgifter där ni ska göra något.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Jobba med R på egen dator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Om du inte sitter i en datorsal på Campus måste du först installera R och sen RStudio. Se videon <a href="https://youtu.be/TFGYlKvQEQ4">installera R och Rstudio</a> för instruktioner.</p>
</div>
</div>
<p>För att starta RStudio letar du bara upp programmet på din dator och klickar på startikonen. När RStudio startas upp kommer det att se ut så här (kan se olika ut på olika datorer):</p>
<p><img src="RstudioPanes.png" class="img-fluid"></p>
<p>De olika delarna av RStudio kallas ofta för <strong>Panes</strong>. Vi kommer gå igenom dessa delar vartefter, men vi börjar med att utforska <strong>Console</strong>, även kallad <strong>terminalen</strong>.</p>
</section>
<section id="använda-r-som-en-miniräknare" class="level2">
<h2 class="anchored" data-anchor-id="använda-r-som-en-miniräknare">1. Använda R som en miniräknare</h2>
<p>Ett bra sätt för att vänja sig vid R är att använda R som en slags miniräknare. I fönstret <strong>Console</strong> i RStudio (vanligtvis nere till vänster) kan man skriva olika typer av <strong>kommandon</strong> som skickas till R för beräkning:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="RStudioConsole.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Tecknet <code>&gt;</code> kallas för <strong>kommandoprompt</strong> (eller bara <strong>prompt</strong>) och är R’s sätt att tala om att det väntar på att ett nytt kommando ska skrivas in (vid det blinkande strecket). Vi säger att vi ‘skriver in något på prompten’.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Multiplikation och division
</div>
</div>
<div class="callout-body-container callout-body">
<p>R använder <code>*</code> för multiplikation och <code>/</code> för division. Potenser (upphöjt till) skrivs med tecknet <code>^</code>, så 3^2 är 9. Du skriver tecknet <code>^</code> genom att trycka <code>Shift</code> + tangent till vänster om <code>Enter</code>. Sen måste du trycka Mellanslag/Space innan du skriver exponenten, annars blir det 3² och det fungerar inte i R.</p>
</div>
</div>
<section id="uppgift-1.1" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-1.1">💪 Uppgift 1.1</h4>
<p>Prova att skriva 2+2 efter det nedersta <code>&gt;</code> tecknet i <strong>Console</strong> och sedan trycka på <code>Enter</code>-tangenten. R bör svara (<strong>returnera</strong>) med talet 4.</p>
</section>
<section id="uppgift-1.2" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-1.2">💪 Uppgift 1.2</h4>
<p>Beräkna 3² (3 upphöjt i 2) i Console. [läs informationsrutan ovanför!]</p>
</section>
<section id="uppgift-1.3" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-1.3">💪 Uppgift 1.3</h4>
<p>Skriv in talet (2+3)/(2+5) i Console och se att R svarar med 0.7142857.</p>
</section>
<section id="uppgift-1.4" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-1.4">💪 Uppgift 1.4</h4>
<p>Du köper aktier för 100 kr. Avkastningen första året är 10%. Använd R för att beräkna värdet på ditt aktiekapital efter ditt första år som aktiesparare, dvs skriv in 100*1.1 och se R returnera 110.</p>
</section>
</section>
<section id="använda-variabler-i-r" class="level2">
<h2 class="anchored" data-anchor-id="använda-variabler-i-r">2. Använda variabler i R</h2>
<p>Du är nu inne på ditt andra år som aktiesparare. Avkastningen år 2 är 6%. Hur mycket aktiekapital har du efter år 2? Vi kan beräkna detta genom 100*1.1*1.06 i Console och få svaret 116.6 kr. Men finns det något sätt att återanvända vår tidigare beräkning 100*1.1 = 110 kr så vi bara behöver multiplicera detta tal med ökningen 1.06 för år 2?</p>
<p>Vi kan lösa detta genom att spara undan vår första beräkning i en <strong>variabel</strong>. Vi kan ge denna variabel (nästan) vilket namn vi vill. Jag kommer kalla den för <code>kapital</code> och börjar med att sätta värdet på variabeln <code>kapital</code> till 100, det ursprungliga kapitalet. Vi skriver <code>kapital = 100</code> i Console. Vi kan sen testa att R nu faktiskt minns att kapitalet är 100 genom att bara skriva variabelns namn följt av <code>Enter</code> i kommandoprompten i Console:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="kapital100.png" class="img-fluid figure-img" width="400"></p>
</figure>
</div>
<p>R skriver snällt ut det värde (100) som jag tilldelade variabeln <code>kapital</code>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Språkbruk
</div>
</div>
<div class="callout-body-container callout-body">
<p>vi säger att vi <strong>tilldelar</strong> <strong>variabel</strong> <code>kapital</code> <strong>värdet</strong> <code>100</code>. Lite mer slarvigt säger vi: ‘vi sätter <code>kapital</code> till 100’.</p>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Se upp!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vi kan återkalla värdet 100 från variabeln <code>kapital</code> när som helst. Men om du stänger ner RStudio och sen startar om programmet (eller om RStudio låser sig) så minns inte R längre värdet på <code>kapital</code>. R minns faktiskt inte ens att det fanns något som hette <code>kapital</code> och kommer att klaga om du skriver <code>kapital</code> på prompten följt av <code>Enter</code>. R och RStudio minns bara variabeln inom en <strong>session</strong>, dvs tills du avslutar RStudio. Om man vill spara data mellan olika sessioner måste man spara ner variablerna på datorns disk (eller på någon lagring på internet). Mer om detta senare.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Learn the rules so you know how to break them
</div>
</div>
<div class="callout-body-container callout-body">
<p>Istället för att skriva <code>kapital = 100</code> så kan vi lika gärna skriva <code>kapital &lt;- 100</code> , där symbolen <code>&lt;-</code> skrivs med de två tecknen <code>&lt;</code> (mindre än) som finns långt ner till vänster på tangentbordet och <code>-</code> (bindestreck). Att skriva variabeltilldelningar med <code>&lt;-</code> är egentligen den rekommenderade varianten i R, men jag tycker det är fult och föredrar <code>=</code>. 🤷</p>
</div>
</div>
<p>Vi kan nu beräkna kapitalet år 1 genom att multiplicera variabeln <code>kapital</code> med talet 1.1</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="KapitalYear1.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Vi kan också <strong>skriva över</strong> värdet i variabeln <code>kapital</code> med ett nytt värde. Vi kanske vill att <code>kapital</code> alltid ska innehålla värdet på det aktiekapital som jag har just nu. Låt oss först ändra värdet på <code>kapital</code> till värdet efter år 1:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="kapitaluppdatering.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Notera speciellt raden <code>kapital = kapital*1.1</code>. R läser detta som:</p>
<blockquote class="blockquote">
<p>Jag (R) ska plocka fram värdet 100 ur variabeln <code>kapital</code>. Sen ska jag multiplicera det med 1.1 för att få talet 110. Det talet 110 stoppar jag sen tillbaka i variabeln <code>kapital</code>.</p>
</blockquote>
<p>Värdet på variabeln <code>kapital</code> är nu alltså 110.</p>
<p>Det fina med det här att vi nu kan fortsätta att ändra variabeln kapital efter att ett ytterligare år har gått, dvs värdet på ditt aktiekapital efter år 2:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="kapiteluppdatering2.png" class="img-fluid figure-img" width="400"></p>
</figure>
</div>
<p>Variabeln <code>kapital</code> är nu 116.6 och du är redo för din kommande avkastning under år 3.</p>
<section id="uppgift-2.1" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-2.1">💪 Uppgift 2.1</h4>
<p>Avkastningen år 3 blev tyvärr minus 4%. Uppdatera variabeln <code>kapital</code> ovan så att den visar att värdet på kapitalet efter år 3 är 111.936 kr. Notera att en minskning med 4% innebär att vi måste multiplicera med 0.96 (1-0.04). Multiplikation med tal mindre än 1 leder till en minskning av kapitalet.</p>
</section>
</section>
<section id="organisera-dig-med-filmappar" class="level2">
<h2 class="anchored" data-anchor-id="organisera-dig-med-filmappar">3. Organisera dig med filmappar</h2>
<p>Det är viktigt att ha ordning på sina filer på datorn och kunna tala om för R var dina filer finns så R kan läsa dem. Vi rekommenderar att du skapar en mapp/folder för varje kurs du läser. Spara inte alla filer på datorns skrivbord eller i mappen <strong>Downloads</strong> eller liknande. Gå till filhanteringsprogrammet på din dator och skapa mappen <strong>SDA1</strong>. Så här:</p>
<ul>
<li><p><img src="windows.png" class="img-fluid" width="20"> Windows: Starta programmet <strong>File Explorer</strong> och navigera (klicka) till den mapp där du vill skapa din kursmapp. Skapa en ny mapp med namnet <strong>SDA1</strong>.</p></li>
<li><p><img src="mac.png" class="img-fluid" width="20">Mac: Starta programmet <strong>Finder</strong> och navigera (klicka) till den mapp där du vill skapa din kursmapp. Skapa en ny mapp med namnet <strong>SDA1</strong>.</p></li>
<li><p><img src="linux.png" class="img-fluid" width="20"> Linux: Starta programmet <strong>Nautilus</strong> (om du använder Ubuntu, annars kan du prova att söka på ordet files om din Linux-distribution använder en annan filhanterare). Navigera (klicka) till den mapp där du vill skapa din kursmapp. Skapa en ny mapp med namnet <strong>SDA1</strong>.</p></li>
</ul>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Svenska är fint, men inte i filnamn
</div>
</div>
<div class="callout-body-container callout-body">
<pre><code>Inga åäö!
Använd inte åäö i namn på filmappar eller filer.
Stor risk att du får problem då.</code></pre>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Dina filer kommer försvinna
</div>
</div>
<div class="callout-body-container callout-body">
<p>Om du skapar en mapp på en dator i datorsalen så kommer den tyvärr inte att finnas kvar nästa gång du loggar in på annan dator, eller kanske inte ens på samma dator. Vi har förslagit till IT-avdelningen på SU att ordna studentkonton på datorerna med individuella lagringsutrymmen som automatiskt dyker upp som en mapp när ni loggar in i datorsalarna. Men i dagsläget finns tyvärr inte detta så man får själv spara ner sina filer på nätet (t ex med en tjänst som Dropbox eller OneDrive). Som student vid SU har man tillgång till 1TB lagring i OneDrive, se <a href="https://www.su.se/medarbetare/it/it-tj%C3%A4nster/office-365-f%C3%B6r-studenter">denna sida</a> för mer info om hur man aktiverar detta. Ett annat sätt är att alltid bära med sig ett USB-minne och skapa SDA1 mappen på den.</p>
</div>
</div>
<section id="uppgift-3.1" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-3.1">💪 Uppgift 3.1</h4>
<p>Skapa mappen <strong>SDA1</strong> på din dator.</p>
</section>
</section>
<section id="använda-editorn-source-för-att-spara-kod" class="level2">
<h2 class="anchored" data-anchor-id="använda-editorn-source-för-att-spara-kod">4. Använda Editorn (Source) för att spara kod</h2>
<p>Skriva kommandon direkt i Console har en nackdel: R minns inte kommandona vi har skrivit i en tidigare Session (innan vi stängde ner RStudio). Varje gång vi startar upp RStudio måste vi skriva om våra kommandon om vi vill fortsätta våra beräkningar där vi slutade senast. 😤 (Det är inte riktigt sant, fliken <strong>History</strong> i övre högra delen av RStudio minns faktiskt gamla kommandon, men det är opraktiskt att förlita sig på <strong>History</strong>).</p>
<p>Vi skulle vilja skriva alla våra kommandon i en textfil som vi kan spara på datorns hårddisk (i din fina SDA1 mapp!) och sen bara köra om alla kommandon in en senare Session. Source <strong>Editorn</strong> in övre vänstra delen av RStudio används för just detta.</p>
<p>Om vi klickar på menyn <u><strong>F</strong></u><strong>ile</strong> och sen under menyn <u><strong>N</strong></u><strong>ew File</strong> och slutligen på <u><strong>R</strong></u> <strong>Script</strong> så öppnas en tom textfil i <strong>Editorn</strong> som heter <em>Untitled1</em> eller något liknande. Här kan vi skriva in kommandon som vi vill spara för framtida sessioner. Vi kan t ex skriva in våra beräkningar av aktiesparandet:</p>
<p><img src="kapitalsource.png" class="img-fluid"></p>
<p>Vi kan spara filen genom att klicka på menyn <u><strong>F</strong></u><strong>ile</strong> och sen på <u><strong>S</strong></u><strong>ave</strong> och sen navigera dig till mappen <strong>SDA1</strong> genom att klicka i rutan som kommer upp. Döp filen till <strong>stock</strong> eller något annat namn som talar om vad filen innehåller (aktie heter stock på engelska). Klicka på Save/Spara. Filen kommer automatiskt att få filändelsen .R, dvs filen kommer alltså heta <strong>stock.R</strong> så RStudio vet att det är en fil men R kommandon. Ett samling kommandon kallas också för <strong>kod</strong> och vi säger att vi arbetar med en <strong>kodfil</strong> i editorn. Vi kan också säga att vi har skrivit ett <strong>program</strong>.</p>
<p>Vi kan köra alla kommandon i filen stock.R genom att klicka på <code>Source</code> - knappen uppe i högra hörnet av editorn:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SourceButton.png" class="img-fluid figure-img" width="400"></p>
</figure>
</div>
<p>När säger att vi ‘kör kommandon’ menar vi att datorn utför (exekverar) våra kommandon, rad för rad. Man kan se det som <code>Source</code>-knappen skickar kommandona till Console så vi slipper skriva in dem där. Vi kan nu skriva <code>kapital</code> i Console för att se svaret 111.936.</p>
<p>När man arbetar med koden vill man ofta köra ett kommando i taget, och inte alla på en gång. Det kan man göra genom att placera markören (det blinkande strecket) på den rad som vill köra (<strong>exekvera</strong>) och sen klicka på <code>Run</code>-knappen i uppe i högre hörnet av editorn. Du behöver inte markera koden på raden, det räcker att bara placera markören någonstans på raden. Kortkommandot Ctrl + Enter gör samma sak.</p>
<p>Ofta ställer man markören på den första raden i koden och klickar på <code>Run</code>-knappen om och om igen för att köra varje rad, en efter en. Allt som körs, t ex olika variabler som <code>kapital</code>, finns tillgängligt i Console, om man t ex vill undersöka om variabeln verkligen har fått det värde som det var meningen att det skulle få.</p>
<p>Man kan också köra flera rader kod på en gång genom att markera raderna och trycka på <code>Run</code>-knappen.</p>
<section id="uppgift-4.1" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-4.1">💪 Uppgift 4.1</h4>
<p>Kör hela filen stock.R genom att använda <code>Source</code>-knappen. Undersök vilket värde variabeln <code>kapital</code> i Console har efter att filen körts genom att skriva <code>kapital</code> följt av Enter.</p>
</section>
<section id="uppgift-4.2" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-4.2">💪 Uppgift 4.2</h4>
<p>Du kanske märkte att inte mycket hände i Console när du klickade på <code>Source</code> - knappen. Det mest hände liksom bakom scenen, där kommandona i Editorn skickades över till Console. Vi skulle kanske vilja att vår kod skrev upp <code>kapital</code> i Console efter att alla ränta-på-ränta beräkningar gjorts. Prova att lägga till en rad i slutet av din kod med kommandot <code>print</code> och variabelns namn som du är intresserad av, dvs <code>print(kapital)</code>. Klicka på <code>Source</code> - knappen igen och verifiera att värdet 111.936 skrivs ut i Console.</p>
</section>
<section id="uppgift-4.3" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-4.3">💪 Uppgift 4.3</h4>
<p>Kör kommandot på rad 1 i stock.R genom att använda <code>Run</code>-knappen. Undersök vilket värde variabeln <code>kapital</code> i Console. Upprepa detta för de resterande raderna i stock.R.</p>
</section>
</section>
<section id="ställa-in-arbetsmappen-working-directory-i-r" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="ställa-in-arbetsmappen-working-directory-i-r">5. Ställa in arbetsmappen (working directory) i R</h2>
<p>Hittills har vi skrivit alla kommandon och tal (t ex <code>kapital = 100</code>), dvs vi har matat in <strong>data</strong> själva. Det är naturligtvis klumpigt om man har mycket data. Vi vill kunna läsa in hela <strong>datamaterialet</strong> från en fil. Här är en Excel-fil med data från 5 års investingar i aktier:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ExcelTabellKapital.png" class="img-fluid figure-img" width="400"></p>
</figure>
</div>
<p>Notera att avkastningen (<strong>returns</strong>) anges i procent och är satt till noll under 2018 eftersom vi köpte aktierna precis i början av år 2019 (säger vi) och alltså inte fick någon avkastning under år 2018.</p>
<p>Excel-filen har jag döpt till <em>stock.xlsx</em>, men den kan döpas till precis vad som helst.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Variabelnamn som man ska undvika
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vi använder engelska namn på kolumnerna. Även om svenska tecken åäö går att använda i kod, är det ändå bäst att undvika dem genom att skriva på engelska. Du kan inte använda mellanslag (space) i variabelnamn, och variabelnamn får inte heller börja med siffror. Det finns också <a href="https://rdrr.io/r/base/Reserved.html">vissa ord</a> som är reserverade och som inte får/ska användas som variabelnamn. Slutligen: R skiljer på små och stora bokstäver. Variabeln <code>kapital</code> är alltså inte samma som <code>Kapital</code>.</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
What’s in a name? Mer än du tror!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ofta vill man ha ett variabelnamn som är lätt att förstå vad variabeln innehåller. Det är superviktigt för att andra ska kunna förstå ens kod, men framförallt för att du själv ska kunna förstå din egen kod om en vecka! 🥴 Använd <code>_</code> (underscore) eller <code>.</code> (punkt) för att dela upp ord om det behövs. T ex <code>my_pretty_little_variable = 100</code>.</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://doorshakespeare.com/general/whats-in-a-name/"><img src="vintage-romeo-and-juliet-poster.jpg" class="img-fluid figure-img" width="60"></a></p>
</figure>
</div>
</div></div><p>Om R ska kunna läsa in data från filen stock.xlsx så måste vi tala om <em>var</em> filen finns på vår dator. Enklast är då att ställa in Rs <strong>working directory</strong>, dvs det standardställe där R letar efter filer i den pågående sessionen. Det finns två sätt att göra detta, varav vi endast rekommenderar det första om man är absolut nybörjare. Rätt snart bör du lära dig att använda det andra sättet, som är smidigare i längden.</p>
<ol type="1">
<li><strong>Working directory</strong> är den mapp som R kommer leta efter filer i. Ändra din arbetsmapp (<strong>working directory</strong>) i R till samma mapp <strong>SDA1</strong> i <strong>Documents</strong> genom att välja menyn <u><strong>S</strong></u><strong>ession</strong> och sen <strong>Set <u>W</u>orking Directory</strong> och slutligen <u><strong>C</strong></u><strong>hoose Directory…</strong> och sedan klicka dig fram till mappen SDA1.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="setwd_menu.png" class="img-fluid figure-img" width="359"></p>
</figure>
</div>
<ol start="2" type="1">
<li><p>För att slippa att klicka sig fram via menyer hela tiden så är det praktiskt att ändra working directory i början av den kodfil som man jobbar med. Då kan man bara köra den kodfilen och working directory ställs in automatiskt. Kommandot <code>setwd</code> gör samma sak som punkten 1 gjorde via menyerna. Här måste vi dock veta <strong>sökvägen</strong> (<strong>path</strong>) till mappen, dvs datorns sätt att hitta till mappen <strong>SDA1</strong>. Sättet att skriva sökvägar på skiljer sig åt på Windows/Mac/Linux. I dessa exempel antar jag att din SDA1 mapp är placerad i mappen Documents.</p>
<ul>
<li><p><img src="mac.png" class="img-fluid" width="20"> På en Mac skriver vi kommandot: <code>setwd('/Users/username/Documents/SDA1')</code> där <code>username</code> ska ersättas med ditt användnamn på din Mac (namnet som kommer upp när du loggar in på datorn). Notera de små ‘blipparna’ kring filvägen i <code>setwd</code> kommandot.</p></li>
<li><p><img src="windows.png" class="img-fluid" width="15"> På en Windows-dator skriver vi kommandot <code>setwd('C:/Documents/SDA1')</code>. Notera de små ‘blipparna’ kring filvägen i <code>setwd</code> kommandot. [Windows-sökvägar skrivs vanligtvis med backslash <code>\</code>. I RStudio skriver man ändå <code>/</code> för att matcha med Mac och Linux].</p></li>
<li><p><img src="linux.png" class="img-fluid" width="20"> På en Linux-dator skriver vi kommandot <code>setwd('/home/username/Documents/SDA1')</code> där <code>username</code> ska ersättas med ditt användnamn som använder när du loggar in.</p></li>
</ul></li>
</ol>
<section id="uppgift-5.1" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-5.1">💪 Uppgift 5.1</h4>
<p>Ställ in din <strong>SDA1</strong> mapp som working directory i RStudio. Kontrollera att du lyckades genom att skriva kommandot <code>getwd()</code> i Console, som bör skriva ut sökvägen till din SDA1 mapp. Nu har du talat om för R att den ska leta efter filer i din kursmapp <strong>SDA1</strong>!</p>
</section>
</section>
<section id="läsa-in-data-från-fil" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="läsa-in-data-från-fil">6. Läsa in data från fil</h2>
<p>Vi vill nu läsa in data från Excelfilen stock.xlsx. Du kan ladda ner den filen <a href="https://github.com/StatisticsSU/SDA1/raw/main/datorlab/lab1/stock.xlsx">här</a>. Beroende på din dator så kommer en av två saker hända:</p>
<ol type="1">
<li><p>filen stock.xlsx hamnar automatiskt i mappen <strong>Downloads</strong> (eller liknande) på din dator. Du får då kopiera eller flytta filen till din working directory (din SDA1 mapp) genom att använda datorns filhanterare.</p></li>
<li><p>du får välja var du vill spara ner filen. Klicka dig fram till din working directory (din SDA1 mapp) och spara filen där.</p></li>
</ol>
<p>R kommer nu att hitta filen och vi är redo att skriva kommandot som läser in filen. Eftersom det är första gången du läser in en Excel-fil i R behöver du göra lite grundjobb. Vi ska göra tre steg:</p>
<ol type="1">
<li><strong>Installera R-paketet</strong> <code>openxlsx</code>. R kommer med ett antal baskommandon förinstallerat. T ex har vi redan använt <strong>funktionen</strong> <code>setwd()</code> för att tala om för R vilken mapp som är vår working directory. Men många kommandon/funktioner i R måste laddas in via s k <strong>R-paket</strong>. Det finns R-paket för nästan allt man vill göra: läsa in data, gör olika typer av statistiska analyser etc etc. Paketet <code>openxlsx</code> är specialiserat på att läsa in Excel-filer i R. För att installera paketet kör vi kommandot <code>install.packages('openxlsx')</code> antingen genom att skriv in det i en kodfil och trycka på <code>Run</code> eller genom att skriva det direkt i terminalen. Efter det kommer R att skriva ut en massa mumbo-jumbo i Console som beskriver installationen. Paket kan ta någon minut eller mer för att installera. Om inga fel uppstår brukar installationsmeddelandet avslutas med något liknande:<br>
<code>DONE (openxlsx)</code><br>
<code>The downloaded source packages are in</code><br>
följt av någon kryptisk sökväg till stället på din dator där paketet har blivit installerat.<br>
<br>
Installation av paket behövs bara göras en gång på din dator. Du behöver inte installera om nästa gång du startar upp RStudio på nytt.</li>
</ol>

<div class="no-row-height column-margin column-container"><div class="">
<center>
<p><img src="spotifypure.png" class="img-fluid" width="40"></p>
</center>
<p>Paketet <a href="https://www.rcharlie.com/spotifyr/">spotifyr</a> kan t ex tala om för dig vilka dina fem mest spelade Spotify-låtar är. Se sidan <a href="https://rpubs.com/dbecker7/StrangeRThings">StrangeR things</a> för andra mer eller mindre konstiga paket. Och, ja, det är vanligt med ett stort R i namnet på R-relaterade saker. NördaR, du vet.</p>
</div></div><ol start="2" type="1">
<li><p><strong>Ladda R-paketet</strong> <code>openxlsx</code>. Kommandot <code>library(openxlsx)</code> laddar funktionerna i paketet <code>openxlsx</code> till R’s arbetsminne. Först efter denna kommando kan vi använda funktionerna i paketet. Notera att vi behöver ‘blippar’ kring paketets namn när vi installerar, men inte när vi laddar paketet. Ett paket som laddats in med library finns inte tillgängligt när du start om RStudio. Du måste alltså skriva <code>library(openxlsx)</code> för varje ny session där du vill läsa in Excel-filer. Det är därför bra att skriva in <code>library(openxlsx)</code> i kodfilen du ska använda för att läsa in Excel-filer.</p></li>
<li><p>Läs in data från Excel-filen genom kommandot/<strong>funktionen</strong> <code>read.xlsx</code>. Här hela kommandot (<strong>funktionsanropet</strong>):<br>
<code>stockdata = read.xlsx('stock.xlsx', sheet = 1)</code><br>
Det är några saker att reda ut här. Först, <code>read.xlsx()</code> är en <strong>funktion</strong> vilket betyder att det är ett kommando som <strong>gör något</strong> baserat på funktionens <strong>input-argument</strong>:</p>
<ul>
<li>Det första argumentet <code>'stock.xlsx'</code> är en <strong>textsträng</strong> (den har ‘blippar’) som talar om för <code>read.xlsx()</code> <em>vilken</em> Excelfil som ska läsas in. Vi behöver inte säga mer eftersom denna fil ligger i vår working directory, som ju R nu känner till.</li>
<li>det andra input-argumentet är <code>sheet = 1</code>, vilket säger åt <code>read.xlsx()</code> att data ligger i det första kalkylbladet i filen stock.xlsx. En Excelfil kan ju har flera kalkylblad, och vill man läsa det andra bladet ändrar man <code>1</code> till <code>2</code>. (men stock.xlsx har bara ett blad, så prova inte detta för då kommer R att klaga).</li>
</ul>
<p>Men vad betyder <code>stockdata =</code> i början av kommandot ovan? Jo, om R ska läsa in data till arbetsminnet så måste den ge denna data ett namn, vilket jag har valt till <code>stockdata</code> , men du får döpa den till (nästan) vad du vill. <code>stockdata</code> är en <strong>variabel</strong>, precis som <code>kapital</code> var en variabel tidigare. Variabeln <code>kapital</code> var en enkel form av en variabel som bara innehöll ett enda <strong>värde</strong>, t ex 100 i början av vårt sparande. Variabeln <code>stockdata</code> är mer komplex. Den innehåller en hel tabell med värden. Så kommandot</p>
<p><code>stockdata = read.xlsx('stock.xlsx', sheet = 1)</code></p>
<p>läses alltså av R som</p>
<blockquote class="blockquote">
<p>Läs in första kalkylbladet av Excelfilen stock.xlsx till arbetsminnet och spara den inlästa tabellen som en tabell i variabeln <code>stockdata</code>.</p>
</blockquote></li>
</ol>
<p>R har lite olika varianter av tabellvariabler. Den viktigaste för oss på den här kursen är en s k <code>dataframe</code>. Du kan se att vår tabellvariabel <code>stockdata</code> faktiskt är en dataframe genom att skriva kommandot <code>class(stockdata)</code> i Console.</p>
<p>När man har läst in ett datamaterial är det bra att ta en snabbtitt på den inlästa tabellen för att se att den blev korrekt inläst. Precis som vi gjorde med variabel <code>kapital</code> för att se dess värde (t ex 100) så kan skriva <code>stockdata</code> i Console för att se dess värde (som ju är en tabell). Om man har en tabell med många rader så blir det fort jobbigt att skriva ut alla rader. Kommandot <code>head()</code> är då praktiskt, som bara skriver ut det första 6 raderna av tabellen. Här har vi alla kommandon som krävs för att ladda in data och skriva ut fint på skärmen (förutom <code>install.packages('openxlsx')</code> som jag antar att du redan har kört för att installera paketet).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>stockdata <span class="ot">=</span> <span class="fu">read.xlsx</span>(<span class="st">'stock.xlsx'</span>, <span class="at">sheet =</span> <span class="dv">1</span>) <span class="co"># läser in Excel data</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(stockdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  year  capital returns
1 2018 100.0000    0.00
2 2019 110.0000    0.10
3 2020 116.6000    0.06
4 2021 111.9360   -0.04
5 2022 117.5328    0.05
6 2023 125.7601    0.07</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Kommentarer
</div>
</div>
<div class="callout-body-container callout-body">
<p>I min kod ovan skrev jag <code># läser in Excel data</code> på en rad. All text som kommer <em>efter</em> tecknet <code>#</code> är en s k <strong>kommentar</strong> i R. Kommentarer ignoreras av R och är därför ett bra sätt att skriva små saker som gör koden mer lättläst. Du måste ha ett <code>#</code> -tecken framför varje rad som du vill “kommentera ut”.</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Ange sökväg till filer som inte är i din Working directory
</div>
</div>
<div class="callout-body-container callout-body">
<p>Istället för att placera alla filer i din working directory <strong>SDA1</strong> kan man istället ange sökvägen till filen när man läser in den. Om jag t ex har sparat filen i mappen <strong>Downloads</strong> på en Windows-dator så skriver jag <strong><br>
</strong><code>stockdata = read.xlsx('C:/Downloads/stock.xlsx', sheet = 1)</code></p>
</div>
</div>
<section id="uppgift-6.1" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-6.1">💪 Uppgift 6.1</h4>
<p>Prova att ladda ner Excelfilen stock.xlsx och spara den i SDA1 mappen. Läs sen in filen i R med kommandot <code>stockdata = read.xlsx('stock.xlsx', 1, colNames=TRUE)</code> . Skriv sen <code>head(stockdata)</code> i Console för att titta på data.<br>
Prova nu att läsa in data med kommandot <code>stockdata = read.xlsx('stock.xlsx', 1, colNames=FALSE)</code> och notera skillnaden genom att återigen skriva <code>head(stockdata)</code> i Console.</p>
</section>
<section id="uppgift-6.2" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-6.2">💪 Uppgift 6.2</h4>
<p>Ändra värdet på variabeln <code>returns</code> år 2023 till 0.05 i stockdata tabellen genom att skriva <code>stockdata[6,3] = 0.05</code> i Console. Det här kommandot läser R som:</p>
<blockquote class="blockquote">
<p>Värdet i tabellen <code>stockdata</code> på rad 6 och kolumn 3 ska ändras till (tilldelas) värdet 0.05.</p>
</blockquote>
<p>Prova att skriva <code>stockdata</code> i Console för att kontrollera att värdet faktiskt ändrades.</p>
</section>
<section id="uppgift-6.3" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-6.3">💪 Uppgift 6.3</h4>
<p>Spara den ändrade stockdata-tabellen till disk genom att skriva följande kommando i Console:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(stockdata, <span class="at">file=</span><span class="st">"stockdata2.Rdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>vilket sparar den ändrade <code>stockdata</code> tabellen till filen <code>stockdata2.Rdata</code> i din working directory (<strong>SDA1</strong>-mappen). Filformatet <code>Rdata</code> är R’s eget filformat. Du kan i en senare session läsa in stockdata enkelt genom kommandot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"stockdata2.Rdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>vilket kommer läsa in tabellen <code>stockdata</code> i R’s arbetsminne.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Läsa in data från andra filformat än Excel
</div>
</div>
<div class="callout-body-container callout-body">
<p>Datamaterial kan också komma från rena textfiler (<code>.txt</code>) och s k <code>csv</code> filer. Se <a href="../../tutorials/ReadingDataFromFile/ReadingDataFromFile.qmd">reading data from a file</a>.</p>
</div>
</div>
</section>
</section>
<section id="analysera-data" class="level2">
<h2 class="anchored" data-anchor-id="analysera-data">7. Analysera data</h2>
<p>När du har läst in datamaterialet i minnet så är det dags att analysera det. Låt oss göra en enkel graf av variabeln <code>capital</code> över åren (<code>year</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(capital <span class="sc">~</span> year, <span class="at">data =</span> stockdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="DatorLab1_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Här har vi använt funktionen <code>plot()</code> med två argument. Argumentet <code>capital ~ year</code> talar om för <code>plot()</code> att den ska göra en graf (‘plotta’) variabeln capital på y-axeln och variabeln year på x-axeln. Vi säger att vi ‘plottar capital <strong>mot</strong> year’. Men <code>capital</code> och <code>year</code> är faktiskt inte variabler i Rs arbetsminne. Där finns bara en tabell (dataframe) som heter <code>stockdata</code> med kolumner som heter <code>capital</code> och <code>year</code>. Så vi måste tala om för <code>plot()</code> att vi vill hämta variablerna <code>capital</code> och <code>year</code> från datamaterialet/tabellen/dataframe <code>stockdata</code>, vilket är precis vad som händer i det andra argumentet <code>data = stockdata</code>. Tecknet <strong>~</strong> brukar läsa som <strong>tilde</strong> och kan skrivas genom tangenterna <code>Alt gr</code> och tangenten till vänster om <code>Enter</code>.<br>
Så kommandot<br>
<br>
<code>plot(capital ~ year, data = stockdata)</code><br>
<br>
läses av R som</p>
<blockquote class="blockquote">
<p>plotta variabeln <code>capital</code> mot variabeln <code>year</code>, där både dessa variabler är kolumner i datamaterialet <code>stockdata</code>.</p>
</blockquote>
<p>Om vi vill beräkna medelvärdet på en variabel kan vi använda funktionen <code>mean()</code>. Men om vi vill beräkna medelvärdet av variabeln <code>capital</code> med kommandot <code>mean(capital)</code> så får vi problemet att R inte har en variabel <code>capital</code> i minnet; <code>capital</code> är ju bara en kolumn i datamaterialet <code>stockdata</code>. Hur säger vi till R: gör om kolumnen <code>capital</code> i datamaterialet <code>stockdata</code> till en egen variabel och beräkna dess medelvärde (mean på engelska). Lösningen att använda <code>$</code>-tecknet för att plocka ut kolumnen <code>returns</code> som en egen variabel: <code>stockdata$capital</code> och sen använda <code>mean()</code> funktionen. Vi kan göra detta på samma kodrad och skriva ut resultatet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>capital <span class="ot">=</span> <span class="fu">mean</span>(stockdata<span class="sc">$</span>capital)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>capital</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 113.6381</code></pre>
</div>
</div>
<p>Kodraden mean<code>capital = mean(stockdata$capital)</code> säger alltså till R att</p>
<blockquote class="blockquote">
<p>Plocka ut kolumnen <code>capital</code> från datamaterialet <code>stockdata</code> och beräkna dess medelvärde.</p>
</blockquote>
<p>Genom att explicit plocka ut kolumner på detta sätt kan vi göra grafen med ett lite annorlunda kommando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> stockdata<span class="sc">$</span>year, <span class="at">y =</span> stockdata<span class="sc">$</span>capital)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="DatorLab1_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>där vi inte längre måste använda argumentet <code>data = stockdata</code> för att tala om var dessa variabler kommer från. Men det förra kommandot <code>plot(capital ~ year, data = stockdata)</code> är nog ändå mer lättläst, tycker jag.</p>
<section id="uppgift-7.1" class="level4">
<h4 class="anchored" data-anchor-id="uppgift-7.1">💪 Uppgift 7.1</h4>
<p>Läs återigen in data med <code>stockdata = read.xlsx('stock.xlsx', sheet = 1)</code>. Gör en graf där du plottar variabeln <code>returns</code> mot <code>year</code>.</p>
<p>Här är hela koden i ett stycke:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">'/home/mv/Dropbox/Teaching/SDA1/datorlab/lab1'</span>) <span class="co"># I have a Linux computer and my data is in this path</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)                         </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>stockdata <span class="ot">=</span> <span class="fu">read.xlsx</span>(<span class="st">'stock.xlsx'</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>stockdata <span class="ot">=</span> <span class="fu">data.frame</span>(stockdata)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>meancapital <span class="ot">=</span> <span class="fu">mean</span>(stockdata<span class="sc">$</span>capital)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(capital <span class="sc">~</span> year, <span class="at">data =</span> stockdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="DatorLab1_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Notera att vi kan skriva <strong>kommentarer</strong> i koden genom tecknet <code>#</code> innan kommentaren. Allt efter tecknet <code>#</code> ignoreras av R när den läser koden. Det kan vara ett bra sätt att förklara en kodrad för användaren.</p>
</section>
</section>
<section id="några-extra-tips" class="level2">
<h2 class="anchored" data-anchor-id="några-extra-tips">8. Några extra tips</h2>
<ul>
<li>Om du trycker på ‘pil-upp’ ⍐ tangenten i Console så kan du stega dig tillbaka till <strong>gamla kommandon</strong> som du har skrivit.</li>
<li>Om du vill <strong>städa upp i Console</strong> kan du skriva <code>Ctrl + l</code> för att rensa Console från text (dvs ett litet L). Dina variabler blir kvar i arbetsminnet.</li>
<li><strong>History</strong>-fliken uppe till höger i RStudio visar alla tidigare kommandon.</li>
<li><strong>Environment</strong>-filken uppe till höger i RStudio ger dig information om de datamaterial och variabler som R har i arbetsminnet. Prova genom att definiera en ny variabel <code>c=100</code> i Console och hur den dyker upp i <strong>Environment</strong>-fliken. Prova att klicka på den blå pilen framför stockdata, du kommer se kolumnerna i det datamaterialet.</li>
<li><strong>Files</strong>-fliken nere till höger i RStudio är en inbyggd filhanterare. Den visar filerna i ditt working directory och du kan även hantera filer där (ta bort, döpa om osv).</li>
<li>I <strong>Help</strong>-fliken kan du söka på hjälp på olika kommandon. Prova att skriva in <code>mean</code>. Du kan även få hjälp genom att skriva t ex <code>?mean</code> i Console.</li>
</ul>
</section>
<section id="datastrukturer" class="level2">
<h2 class="anchored" data-anchor-id="datastrukturer">9. Datastrukturer</h2>
<p>R kan spara data i olika <strong>datastrukturer</strong>. Vi definerade tidigare variabeln <code>kapital</code> och tilldela denna variabel värdet <code>100</code> genom kommandot <code>kapital = 100</code>.</p>
<p>Ofta vill man spara mer än ett tal i samma datastruktur. Ett sätt är att skapa en <strong>vektor</strong> med kommandot <code>c()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>capital_all_years <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">110</span>,<span class="fl">116.6</span>,<span class="fl">111.936</span>,<span class="fl">117.532</span>,<span class="fl">125.760</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Den nya variabel <code>capital_all_years</code> innehåller alltså kapitalet för alla år. Men om jag skulle vilja ‘plocka ut’ kapitalets värde vid det tredje året? Då kan man indexera vektorn genom hakparenteser (brackets) <code>[]</code>, så här:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>capital_all_years[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 116.6</code></pre>
</div>
</div>
<p>Man kan också plocka ut flera värden samtidigt, t ex år 3 och 5, med kommandot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>capital_all_years[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 116.600 117.532</code></pre>
</div>
</div>
<p>Notera att vi indexerade med en vektor, dvs vi använde <code>c()</code> kommandot eftersom vi vill tala om för R att plocka ut fler än ett värde.</p>
<p>Vi har redan sett en av Rs viktigaste datatyper: en s k <strong>dataframe</strong>. En dataframe är en tabell med information om vad kolumnerna heter, och ibland även vad raderna heter. Ett exempel är vår <code>stockdata</code> som är dataframe med tre kolumner: year, capital och stock. Vi kan se att det är en dataframe genom att använda kommandot <code>class()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(stockdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>Vi har faktiskt redan använt idéen med att plocka ut värden genom indexing in dataframes tidigare när vi skrev <code>stockdata[6,3]</code> för att plocka ut värdet på rad 6 och kolumn 3 i tabellen/dataframe. Och vi såg att vi också kunde ändra värdena i tabellen genom tilldelning: <code>stockdata[6,3]=0.05</code> . Samma sak kan man göra med en vektor, t ex så gör kommandot <code>capital_all_years[5] = 200</code> att vi ändrar kapitalet år 5 till 200 i vår vektor som innehåller alla års kapital.</p>
<p>Det finns en annan slags tabell som kan vara bra att känna till i R, en s k <strong>matris</strong> (eng. Matrix). Matriser är som dataframes, men innehåller inte information om namnet på kolumnerna. Å andra sidan kan man göra matematiska beräkningar med hela matriser, men det är inget vi gör på denna kurs. Anledningen till att vi nämner matriser här är att man ibland måste göra om en matris till en dataframe eller tvärtom. Vissa R-program vi bara jobba med dataframes och klagar om man försöker få det att jobba med en matris. Låt oss skapa en matris som jag kallar <code>A</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">11</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">62</span>,<span class="dv">3</span>), <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]   11    5
[2,]    2   62
[3,]    4    3</code></pre>
</div>
</div>
<p>vilket är en matris (tabell) med 3 rader och 2 kolumner (som vi skapar från en vektor med 6 tal). Om vi använder <code>class()</code>-kommandot så ser vi att A mycket riktigt är en matrix, vilket är engelska för matris:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "matrix" "array" </code></pre>
</div>
</div>
<p>Om vi vill göra om en matris till en dataframe så använder vi kommandot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>B <span class="ot">=</span> <span class="fu">as.data.frame</span>(A)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  V1 V2
1 11  5
2  2 62
3  4  3</code></pre>
</div>
</div>
<p>där R bestämmer att kolumnerna ska heta V1 och V2 (en dataframe måste ha namn på kolumnerna i tabellen). B är alltså nu en dataframe, vilket man kan testa genom:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(B)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>En annan viktigt datatyp vi vill nämna är en s k <strong>sträng</strong> (eng. string), vilket kallas för <code>character</code> i R och är en variabel som innehåller text. Värdet på en sträng-variabel skriv innanför citattecken:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>mittnamn <span class="ot">=</span> <span class="st">"mattias"</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mittnamn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Man kan även använda enkla ‘blippar’ kring strängens värde, dvs <code>mittnamn = 'mattias'</code>.</p>
<p>Om vi t ex använder <code>names()</code> kommandot på vår <code>stockdata</code> dataframe så får vi en vektor med strängar (en vektor eftersom det finns fler än ett kolumnnamn i <code>stockdata</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(stockdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "year"    "capital" "returns"</code></pre>
</div>
</div>
<p>Slutligen finns datatypen <code>list</code> i R. En list (eller lista på svenska) är en vektor på steroider. En vanlig vektor måste innehålla <em>data av samma sort</em>, t ex en vektor med numeriska tal <code>x = c(1,4,5)</code> eller en vektor med strängar (text): <code>c("mattias","adam","elma")</code> . En lista är mer generell och kan innehålla data av olika sort:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">=</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">2</span>, <span class="at">b =</span> <span class="st">"hej"</span>, <span class="at">d =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">2</span>))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 2

$b
[1] "hej"

$d
[1] 4 5 2</code></pre>
</div>
</div>
<p>Jag kan döpa elementen i listan vad jag vill, här kallade jag dem <code>a</code>, <code>b</code> och <code>d</code> (jag vill undvika bokstaven c eftersom det är symbolen för att skapa vektorer). Notera att elementet <code>a</code> innehåller ett enda tal, <code>b</code> en sträng och <code>d</code> en vektor med tre tal. I utskriften ser man också att det olika listelementen med ett $-tecken framför. För att t ex plocka ut listelementet <code>d</code> kan man nämligen skriva</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>my_list<span class="sc">$</span>d</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 5 2</code></pre>
</div>
</div>
<p>Känns det bekant med $-tecken för att plocka ut saker? Vi har redan sett att man kan plocka ut en kolumn i en dataframe (tabell) genom att skriva t ex <code>stockdata$returns</code> . En dataframe är nämligen egentligen en slags lista.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hitta lätt bland alla fickor
</div>
</div>
<div class="callout-body-container callout-body">
<p>Om du skriver <code>my_list$</code> (inklusive $-tecknet) i Console kommer det att dyka upp en lista med alla element som finns i listan <code>my_list</code>. Använd pil-tangenterna (upp och ned) för att välja det element du är intresserad av och tryck Enter. 🤩</p>
</div>
</div>
<p>Vi ska slutligen presentera ytterligare en viktig datatyp i R: <code>factor</code>. Prova att skriva in kommandot <code>str(stockdata)</code> i Console. Kommandot returnerar variablernas namn och datatyper, vilket ju är <code>numeric</code> för alla våra tre kolumner <code>year</code>, <code>capital</code> och <code>returns</code> i tabellen. Men tabellkolumner kan bestå av bokstäver (strängar) eller <strong>kategoriska variabler</strong> (t ex <code>man</code> och <code>kvinna</code>). Kategoriska variabler kallas för <strong>faktorvariabler</strong> i R.</p>
<p>R har ett antal inbyggda datamaterial, t ex datamaterialet <code>warpbreaks</code> som innehåller information om antalet fel (<code>breaks</code>) vid vävning för två olika typer av garn (<code>wool</code>) och tre olika spänningar av vävstolen (<code>tension</code>). Vi börjar med att tilldela datamaterialet till variabeln garndata genom att skriva <code>garndata = warpbreaks</code> i Console. Skriv <code>head(garndata)</code> för en snabb titt på de första observationerna. Som du ser är <code>breaks</code> en numerisk variabel (eller snarare en kolumn in tabellen), men både <code>wool</code> och <code>tension</code> är kategoriska faktorvariabler (<code>wool</code> kan bara vara av garntyp <code>A</code> eller <code>B</code>, och tension kan vara låg (<code>L</code>), mellan (<code>M</code>) eller hög (<code>H</code>)). Vi kan se detta mer exakt genom att skriva <code>str(garndata)</code> i Console:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>garndata <span class="ot">=</span> warpbreaks</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(garndata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   54 obs. of  3 variables:
 $ breaks : num  26 30 54 25 70 52 51 26 67 18 ...
 $ wool   : Factor w/ 2 levels "A","B": 1 1 1 1 1 1 1 1 1 1 ...
 $ tension: Factor w/ 3 levels "L","M","H": 1 1 1 1 1 1 1 1 1 2 ...</code></pre>
</div>
</div>
<p>där vi ser att <code>wool</code> är en faktorvariabel med två olika värden (<strong>levels</strong>, eller <strong>nivåer</strong> på svenska), medan <code>tension</code> har tre nivåer. Vi ser även att <code>breaks</code> är en numerisk variabel. Vi kan även se denna information i den övre högra panelen i R under fliken <strong>Environment</strong> genom att klicka på den lilla pilen på <code>garndata</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="environmentR.png" class="img-fluid figure-img" width="503"></p>
</figure>
</div>
</section>
<section id="funktioner" class="level2">
<h2 class="anchored" data-anchor-id="funktioner">10. Funktioner</h2>
<p>Vi har sett idén med funktioner tidigare: en funktion <em>gör</em> något med data. I matematikens värld är en funktion <span class="math inline">\(f\)</span> en slags maskin som använder en <strong>input</strong> <span class="math inline">\(x\)</span>, gör några matematiska beräkningar, och ger tillbaka en <strong>output</strong> <span class="math inline">\(y\)</span>. Vi brukar skriva funktionen som <span class="math inline">\(y=f(x)\)</span>.</p>
<p>En funktion i R är en liknande sak: den använder ett eller flera inputs och ger tillbaka ett eller flera outputs. Det kan handla om ren matematisk funktion, som kvadratroten <span class="math inline">\(\sqrt{x}\)</span> av ett tal <span class="math inline">\(x\)</span>, vilket i R beräknas av funktionen <code>sqrt</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">4</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">sqrt</span>(x)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>men det kan också vara något mer komplicerat som t ex att läsa in data från en Excel-fil:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>stockdata <span class="ot">=</span> <span class="fu">read.xlsx</span>(<span class="st">'stock.xlsx'</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>där <code>read.xlsx</code> är en funktion som tre input-argument filnamn (som en sträng!), talet 1 för att vi vill läsa det första bladet. Funktionen <code>read.xlsx</code> ger tillbaka en (tibble) dataframe som output med data.</p>
<p>Det fina med programmeringsspråk är att man kan <strong>skapa egna funktioner</strong> som gör just det jobb som man behöver. Om jag t ex vill skapa en funktion som beräknar ränta-på-ränta effekten på ett sparkapital (med samma ränta varje år) så kan jag skriva ihop följande funktion:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>capital_interest <span class="ot">&lt;-</span> <span class="cf">function</span>(capital, interest, years){</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  newcapital <span class="ot">=</span> capital<span class="sc">*</span>interest<span class="sc">^</span>years</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(newcapital)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Några saker att notera:</p>
<ul>
<li><p>Man använder alltid ordet <code>function</code> där att definiera en funktion.</p></li>
<li><p>Funktionens input-argument skrivs inom parenteser. Vilka namn du väljer är helt fritt, men det måste vara samma variabelnamn som du sedan använder innanför de s k måsvingarna <code>{}</code> som innehåller den faktiska koden som gör jobbet.</p></li>
<li><p>Funktionen tilldelas en variabel som jag gett namnet <code>capital_interest</code> , vilket är ett namn du väljer helt själv.</p></li>
<li><p>Koden använder ränta-på-ränta formeln <span class="math inline">\(capital\cdot interest^{years}\)</span> , dvs räntan, angett som 1.1 om du får 10% ränta, upphöjs i antal sparandeår. Upphöjt skrivs som <code>^</code> i R.</p></li>
<li><p>Funktionen avslutar med ordet <code>return</code> och den variabel du vill att funktionen ska ge tillbaka som output.</p></li>
</ul>
<p>Om jag sen vill använda min funktion för att se hur min hundring på banken kommer att utvecklas under 20 år med 5% ränta så skriver jag (jag <strong>anropar</strong> funktionen):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>my_money <span class="ot">=</span> <span class="fu">capital_interest</span>(<span class="dv">100</span>, <span class="fl">1.05</span>, <span class="dv">20</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>my_money</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 265.3298</code></pre>
</div>
</div>
<p>Vi sa ovan att vi tilldelade variabeln <code>capital_interest</code> en funktion. 🤯 Wait, what? Jo, faktiskt, om vi undersöker vilken typ av variabel <code>capital_interest</code> är så är det faktiskt en funktion:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(capital_interest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "function"</code></pre>
</div>
</div>
<p>När vi skrev variabel <code>kapital</code> i Console skrev den ut värdet, t ex 100. Vad händer om vi göra samma sak med vår funktionsvariabel <code>capital_interest</code> ? Hela funktionen skrivs ut som text!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a> capital_interest </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function(capital, interest, years){
  newcapital = capital*interest^years
  return(newcapital)
}</code></pre>
</div>
</div>
<p>Vi kommer inte att skriva egna funktioner på kursen. Men du kommer att använda funktioner. Och då kan det vara bra att veta att någon har skrivit dessa funktioner på precis det sätt som vi skapade funktionen <code>capital_interest</code> ovan.</p>
<p>En sista sak: vissa funktioner har inga inputargument och ibland inte heller några outputs. Det betyder inte att funktionen inte gör något, utan den har istället vissa sido-effekter som inte alltid syns. <code>setwd</code> är t ex funktion som har sökvägen som input, men har inga output, men däremot sidoeffekten att ändra working directory. Funktionen <code>getwd()</code> har inga input-argument men ger tillbaka din nuvarande working directory som output.</p>
</section>
<section id="tre-dialekter-av-r" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="tre-dialekter-av-r">11. Tre dialekter av R</h2>
<p>Man kan dela upp R’s språk i tre slags dialekter, dvs tre olika kommandon (syntax) för att göra ungefär samma sak:</p>
<ul>
<li><strong>Base-R</strong> - den ursprungliga syntaxen in R</li>
<li><strong>Formula syntax</strong> - syntax som via paketet <code>Mosaic</code> har utvecklats för undervisning i statistik</li>
<li><strong>Tidyverse</strong> - en modern syntax utvecklat av personerna bakom RStudio.</li>
</ul>
<center>
<p><a href="../../R/cheatsheets/base-r_cheat_sheet.pdf"><img src="../../misc/hexagons/figs/base_r_hexagon.svg" class="img-fluid" width="60"></a>&nbsp; <a href="../../R/cheatsheets/mosaic_cheatsheet_gf.pdf"><img src="../../misc/hexagons/figs/mosaic_hexagon.svg" class="img-fluid" width="60"></a>&nbsp; <a href="../../R/cheatsheets/ggplot2_cheatsheet.pdf"><img src="../../misc/hexagons/figs/tidyverse_hexagon.svg" class="img-fluid" width="60"></a></p>
</center>
<p><br></p>
<p>I SDA1 kommer vi försöka använda Formula syntax som mycket som möjligt, med inslag av Base-R. Tidyverse-kod kan ofta vara extremt effektiv, men tar för lång tid att lära sig på en grundkurs i statistik. Vi kommer dock då och då att visa hur man gör samma sak i de olika dialekterna, men på ett sätt som inte stör flödet för den student som helst vill hålla sig till ett sätt. Vi använder ikoner som du som student kan klicka på för att se ett kommando i olika dialekter. Här är ett exempel (prova att klicka ikonerna i höger-marginalen):</p>
<p>I Formula syntax har vi redan sett att vi kan göra en scatter plot med kommandot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mpg <span class="sc">~</span> hp, <span class="at">data =</span> mtcars, <span class="at">main =</span> <span class="st">"Cars fuel usage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="DatorLab1_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><a href="../../R/BaseRSyntax.qmd#scatter-plot"><img src="../../misc/hexagons/figs/base_r_hexagon.svg" class="img-fluid" width="60"></a> <a href="../../R/TidyverseSyntax.qmd#scatter-plot"><img src="../../misc/hexagons/figs/tidyverse_hexagon.svg" class="img-fluid" width="60"></a></p>
</div></div><p>Om man vill ha plottar som liknar de fina plottarna i Tidyverse, men fortsätta att skriva den enklare formula-syntaxen så kan man använda paketet <code>ggformula</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggformula)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> hp, <span class="at">data =</span> mtcars, <span class="at">title =</span> <span class="st">"Cars fuel usage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="DatorLab1_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="sammanfattning" class="level2">
<h2 class="anchored" data-anchor-id="sammanfattning">12. Sammanfattning</h2>
<div class="callout-info callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
I den här laborationen har du lärt dig:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Använda R som en miniräknare.</p></li>
<li><p>Använda variabler som ett sätt att spara värden i en session.</p></li>
<li><p>Sätta working directory så R kan hitta dina filer.</p></li>
<li><p>Skriva kod både i Console och Editorn.</p></li>
<li><p>Läsa in data från fil och göra inledande grafer och medelvärdeberäkningar för dataanalys.</p></li>
<li><p>Vi har också tittat på datastrukturer i R och t o m nosat lite på funktioner i R.</p></li>
</ul>
</div>
</div>
<p><br><br></p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
End of the line
</div>
</div>
<div class="callout-body-container callout-body">
<p>Om du har kommit hit utan att slita ditt hår alltför många gånger så tycker jag att du ska vara väldigt nöjd med dig själv. Du har redan lärt dig massor om R. Ditt framtida jag kommer att tacka dig!</p>
<p>Ta nu en ☕ och en 🍰 för att fira!</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="states-of-a-programmer.png" class="img-fluid figure-img" width="550"></p>
<p></p><figcaption class="figure-caption">https://devcamp.com/site_blogs/top-5-programming-memes</figcaption><p></p>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://www.su.se/statistiska-institutionen/">Department of Statistics - Stockholm University</a>
  </li>  
</ul>
    </div>   
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Use our course!
  </li>  
</ul>
      </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/StatisticsSU/STM">
      <i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>