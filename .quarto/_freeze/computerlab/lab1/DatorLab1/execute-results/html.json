{
  "hash": "8b5a49c2be2122a5123807413f8b24d0",
  "result": {
    "markdown": "---\ntitle: Statistik och dataanalys I, 15 hp\nsubtitle: Datorlaboration 1\nauthor: \"Mattias Villani\"\ndate: last-modified\nformat:\n  html: default\n  #pdf: default\n#title-block-banner: true\n---\n\n\n------------------------------------------------------------------------\n\n## Introduktion\n\n> I den h√§r f√∂rsta datorlabben kommer ni bekanta er med programmeringsspr√•ket **R** och dess arbetsmilj√∂ **RStudio**.\n\n::: callout-important\n## Ta det lugnt\n\n> Det √§r **m√•nga** nya saker som presenteras i den h√§r datorlaborationen, s√• var beredd p√• att inte allt kommer att sjunka in direkt. F√∂rs√∂k att ta dig igenom hela texten, och √∂vningarna. Du kan sen √•terkomma till denna labb p√• andra datorlaborationer f√∂r att repetera de delar du beh√∂ver.<br> Ok, ta ett djupt andetag s√• b√∂rjar vi.\n:::\n\n::: callout-info\n### Instruktioner\n\nüí™ Avsnitt med den h√§r symbolen √§r uppgifter d√§r ni ska g√∂ra n√•got.\n:::\n\n::: callout-note\n### Jobba med R p√• egen dator\n\nOm du inte sitter i en datorsal p√• Campus m√•ste du f√∂rst installera R och sen RStudio. Se videon [installera R och Rstudio](https://youtu.be/TFGYlKvQEQ4) f√∂r instruktioner.\n:::\n\nF√∂r att starta RStudio letar du bara upp programmet p√• din dator och klickar p√• startikonen. N√§r RStudio startas upp kommer det att se ut s√• h√§r (kan se olika ut p√• olika datorer):\n\n![](RstudioPanes.png)\n\nDe olika delarna av RStudio kallas ofta f√∂r **Panes**. Vi kommer g√• igenom dessa delar vartefter, men vi b√∂rjar med att utforska **Console**, √§ven kallad **terminalen**.\n\n## 1. Anv√§nda R som en minir√§knare\n\nEtt bra s√§tt f√∂r att v√§nja sig vid R √§r att anv√§nda R som en slags minir√§knare. I f√∂nstret **Console** i RStudio (vanligtvis nere till v√§nster) kan man skriva olika typer av **kommandon** som skickas till R f√∂r ber√§kning:\n\n![](RStudioConsole.png){fig-align=\"center\"}\n\nTecknet `>` kallas f√∂r **kommandoprompt** (eller bara **prompt**) och √§r R's s√§tt att tala om att det v√§ntar p√• att ett nytt kommando ska skrivas in (vid det blinkande strecket). Vi s√§ger att vi 'skriver in n√•got p√• prompten'.\n\n::: callout-note\n## Multiplikation och division\n\nR anv√§nder `*` f√∂r multiplikation och `/` f√∂r division. Potenser (upph√∂jt till) skrivs med tecknet `^`, s√• 3\\^2 √§r 9. Du skriver tecknet `^` genom att trycka `Shift` + tangent till v√§nster om `Enter`. Sen m√•ste du trycka Mellanslag/Space innan du skriver exponenten, annars blir det 3¬≤ och det fungerar inte i R.\n:::\n\n#### üí™ Uppgift 1.1\n\nProva att skriva 2+2 efter det nedersta `>` tecknet i **Console** och sedan trycka p√• `Enter`-tangenten. R b√∂r svara (**returnera**) med talet 4.\n\n#### üí™ Uppgift 1.2\n\nBer√§kna 3¬≤ (3 upph√∂jt i 2) i Console. \\[l√§s informationsrutan ovanf√∂r!\\]\n\n#### üí™ Uppgift 1.3\n\nSkriv in talet (2+3)/(2+5) i Console och se att R svarar med 0.7142857.\n\n#### üí™ Uppgift 1.4\n\nDu k√∂per aktier f√∂r 100 kr. Avkastningen f√∂rsta √•ret √§r 10%. Anv√§nd R f√∂r att ber√§kna v√§rdet p√• ditt aktiekapital efter ditt f√∂rsta √•r som aktiesparare, dvs skriv in 100\\*1.1 och se R returnera 110.\n\n## 2. Anv√§nda variabler i R\n\nDu √§r nu inne p√• ditt andra √•r som aktiesparare. Avkastningen √•r 2 √§r 6%. Hur mycket aktiekapital har du efter √•r 2? Vi kan ber√§kna detta genom 100\\*1.1\\*1.06 i Console och f√• svaret 116.6 kr. Men finns det n√•got s√§tt att √•teranv√§nda v√•r tidigare ber√§kning 100\\*1.1 = 110 kr s√• vi bara beh√∂ver multiplicera detta tal med √∂kningen 1.06 f√∂r √•r 2?\n\nVi kan l√∂sa detta genom att spara undan v√•r f√∂rsta ber√§kning i en **variabel**. Vi kan ge denna variabel (n√§stan) vilket namn vi vill. Jag kommer kalla den f√∂r `kapital` och b√∂rjar med att s√§tta v√§rdet p√• variabeln `kapital` till 100, det ursprungliga kapitalet. Vi skriver `kapital = 100` i Console. Vi kan sen testa att R nu faktiskt minns att kapitalet √§r 100 genom att bara skriva variabelns namn f√∂ljt av `Enter` i kommandoprompten i Console:\n\n![](kapital100.png){fig-align=\"center\" width=\"400\"}\n\nR skriver sn√§llt ut det v√§rde (100) som jag tilldelade variabeln `kapital`.\n\n::: callout-note\n### Spr√•kbruk\n\nvi s√§ger att vi **tilldelar** **variabel** `kapital` **v√§rdet** `100`. Lite mer slarvigt s√§ger vi: 'vi s√§tter `kapital` till 100'.\n:::\n\n::: callout-warning\n### Se upp!\n\nVi kan √•terkalla v√§rdet 100 fr√•n variabeln `kapital` n√§r som helst. Men om du st√§nger ner RStudio och sen startar om programmet (eller om RStudio l√•ser sig) s√• minns inte R l√§ngre v√§rdet p√• `kapital`. R minns faktiskt inte ens att det fanns n√•got som hette `kapital` och kommer att klaga om du skriver `kapital` p√• prompten f√∂ljt av `Enter`. R och RStudio minns bara variabeln inom en **session**, dvs tills du avslutar RStudio. Om man vill spara data mellan olika sessioner m√•ste man spara ner variablerna p√• datorns disk (eller p√• n√•gon lagring p√• internet). Mer om detta senare.\n:::\n\n::: callout-note\n### Learn the rules so you know how to break them\n\nIst√§llet f√∂r att skriva `kapital = 100` s√• kan vi lika g√§rna skriva `kapital <- 100` , d√§r symbolen `<-` skrivs med de tv√• tecknen `<` (mindre √§n) som finns l√•ngt ner till v√§nster p√• tangentbordet och `-` (bindestreck). Att skriva variabeltilldelningar med `<-` √§r egentligen den rekommenderade varianten i R, men jag tycker det √§r fult och f√∂redrar `=`. ü§∑\n:::\n\nVi kan nu ber√§kna kapitalet √•r 1 genom att multiplicera variabeln `kapital` med talet 1.1\n\n![](KapitalYear1.png){fig-align=\"center\"}\n\nVi kan ocks√• **skriva √∂ver** v√§rdet i variabeln `kapital` med ett nytt v√§rde. Vi kanske vill att `kapital` alltid ska inneh√•lla v√§rdet p√• det aktiekapital som jag har just nu. L√•t oss f√∂rst √§ndra v√§rdet p√• `kapital` till v√§rdet efter √•r 1:\n\n![](kapitaluppdatering.png){fig-align=\"center\"}\n\nNotera speciellt raden `kapital = kapital*1.1`. R l√§ser detta som:\n\n> Jag (R) ska plocka fram v√§rdet 100 ur variabeln `kapital`. Sen ska jag multiplicera det med 1.1 f√∂r att f√• talet 110. Det talet 110 stoppar jag sen tillbaka i variabeln `kapital`.\n\nV√§rdet p√• variabeln `kapital` √§r nu allts√• 110.\n\nDet fina med det h√§r att vi nu kan forts√§tta att √§ndra variabeln kapital efter att ett ytterligare √•r har g√•tt, dvs v√§rdet p√• ditt aktiekapital efter √•r 2:\n\n![](kapiteluppdatering2.png){fig-align=\"center\" width=\"400\"}\n\nVariabeln `kapital` √§r nu 116.6 och du √§r redo f√∂r din kommande avkastning under √•r 3.\n\n#### üí™ Uppgift 2.1\n\nAvkastningen √•r 3 blev tyv√§rr minus 4%. Uppdatera variabeln `kapital` ovan s√• att den visar att v√§rdet p√• kapitalet efter √•r 3 √§r 111.936 kr. Notera att en minskning med 4% inneb√§r att vi m√•ste multiplicera med 0.96 (1-0.04). Multiplikation med tal mindre √§n 1 leder till en minskning av kapitalet.\n\n## 3. Organisera dig med filmappar\n\nDet √§r viktigt att ha ordning p√• sina filer p√• datorn och kunna tala om f√∂r R var dina filer finns s√• R kan l√§sa dem. Vi rekommenderar att du skapar en mapp/folder f√∂r varje kurs du l√§ser. Spara inte alla filer p√• datorns skrivbord eller i mappen **Downloads** eller liknande. G√• till filhanteringsprogrammet p√• din dator och skapa mappen **SDA1**. S√• h√§r:\n\n-   ![](windows.png){width=\"20\"} Windows: Starta programmet **File Explorer** och navigera (klicka) till den mapp d√§r du vill skapa din kursmapp. Skapa en ny mapp med namnet **SDA1**.\n\n-   ![](mac.png){width=\"20\"}Mac: Starta programmet **Finder** och navigera (klicka) till den mapp d√§r du vill skapa din kursmapp. Skapa en ny mapp med namnet **SDA1**.\n\n-   ![](linux.png){width=\"20\"} Linux: Starta programmet **Nautilus** (om du anv√§nder Ubuntu, annars kan du prova att s√∂ka p√• ordet files om din Linux-distribution anv√§nder en annan filhanterare). Navigera (klicka) till den mapp d√§r du vill skapa din kursmapp. Skapa en ny mapp med namnet **SDA1**.\n\n::: callout-warning\n### Svenska √§r fint, men inte i filnamn\n\n    Inga √•√§√∂!\n    Anv√§nd inte √•√§√∂ i namn p√• filmappar eller filer.\n    Stor risk att du f√•r problem d√•.\n:::\n\n::: callout-warning\n### Dina filer kommer f√∂rsvinna\n\nOm du skapar en mapp p√• en dator i datorsalen s√• kommer den tyv√§rr inte att finnas kvar n√§sta g√•ng du loggar in p√• annan dator, eller kanske inte ens p√• samma dator. Vi har f√∂rslagit till IT-avdelningen p√• SU att ordna studentkonton p√• datorerna med individuella lagringsutrymmen som automatiskt dyker upp som en mapp n√§r ni loggar in i datorsalarna. Men i dagsl√§get finns tyv√§rr inte detta s√• man f√•r sj√§lv spara ner sina filer p√• n√§tet (t ex med en tj√§nst som Dropbox eller OneDrive). Som student vid SU har man tillg√•ng till 1TB lagring i OneDrive, se [denna sida](https://www.su.se/medarbetare/it/it-tj%C3%A4nster/office-365-f%C3%B6r-studenter) f√∂r mer info om hur man aktiverar detta. Ett annat s√§tt √§r att alltid b√§ra med sig ett USB-minne och skapa SDA1 mappen p√• den.\n:::\n\n#### üí™ Uppgift 3.1\n\nSkapa mappen **SDA1** p√• din dator.\n\n## 4. Anv√§nda Editorn (Source) f√∂r att spara kod\n\nSkriva kommandon direkt i Console har en nackdel: R minns inte kommandona vi har skrivit i en tidigare Session (innan vi st√§ngde ner RStudio). Varje g√•ng vi startar upp RStudio m√•ste vi skriva om v√•ra kommandon om vi vill forts√§tta v√•ra ber√§kningar d√§r vi slutade senast. üò§ (Det √§r inte riktigt sant, fliken **History** i √∂vre h√∂gra delen av RStudio minns faktiskt gamla kommandon, men det √§r opraktiskt att f√∂rlita sig p√• **History**).\n\nVi skulle vilja skriva alla v√•ra kommandon i en textfil som vi kan spara p√• datorns h√•rddisk (i din fina SDA1 mapp!) och sen bara k√∂ra om alla kommandon in en senare Session. Source **Editorn** in √∂vre v√§nstra delen av RStudio anv√§nds f√∂r just detta.\n\nOm vi klickar p√• menyn [**F**]{.underline}**ile** och sen under menyn [**N**]{.underline}**ew File** och slutligen p√• [**R**]{.underline} **Script** s√• √∂ppnas en tom textfil i **Editorn** som heter *Untitled1* eller n√•got liknande. H√§r kan vi skriva in kommandon som vi vill spara f√∂r framtida sessioner. Vi kan t ex skriva in v√•ra ber√§kningar av aktiesparandet:\n\n![](kapitalsource.png)\n\nVi kan spara filen genom att klicka p√• menyn [**F**]{.underline}**ile** och sen p√• [**S**]{.underline}**ave** och sen navigera dig till mappen **SDA1** genom att klicka i rutan som kommer upp. D√∂p filen till **stock** eller n√•got annat namn som talar om vad filen inneh√•ller (aktie heter stock p√• engelska). Klicka p√• Save/Spara. Filen kommer automatiskt att f√• fil√§ndelsen .R, dvs filen kommer allts√• heta **stock.R** s√• RStudio vet att det √§r en fil men R kommandon. Ett samling kommandon kallas ocks√• f√∂r **kod** och vi s√§ger att vi arbetar med en **kodfil** i editorn. Vi kan ocks√• s√§ga att vi har skrivit ett **program**.\n\nVi kan k√∂ra alla kommandon i filen stock.R genom att klicka p√• `Source` - knappen uppe i h√∂gra h√∂rnet av editorn:\n\n![](SourceButton.png){fig-align=\"center\" width=\"400\"}\n\nN√§r s√§ger att vi 'k√∂r kommandon' menar vi att datorn utf√∂r (exekverar) v√•ra kommandon, rad f√∂r rad. Man kan se det som `Source`-knappen skickar kommandona till Console s√• vi slipper skriva in dem d√§r. Vi kan nu skriva `kapital` i Console f√∂r att se svaret 111.936.\n\nN√§r man arbetar med koden vill man ofta k√∂ra ett kommando i taget, och inte alla p√• en g√•ng. Det kan man g√∂ra genom att placera mark√∂ren (det blinkande strecket) p√• den rad som vill k√∂ra (**exekvera**) och sen klicka p√• `Run`-knappen i uppe i h√∂gre h√∂rnet av editorn. Du beh√∂ver inte markera koden p√• raden, det r√§cker att bara placera mark√∂ren n√•gonstans p√• raden. Kortkommandot Ctrl + Enter g√∂r samma sak.\n\nOfta st√§ller man mark√∂ren p√• den f√∂rsta raden i koden och klickar p√• `Run`-knappen om och om igen f√∂r att k√∂ra varje rad, en efter en. Allt som k√∂rs, t ex olika variabler som `kapital`, finns tillg√§ngligt i Console, om man t ex vill unders√∂ka om variabeln verkligen har f√•tt det v√§rde som det var meningen att det skulle f√•.\n\nMan kan ocks√• k√∂ra flera rader kod p√• en g√•ng genom att markera raderna och trycka p√• `Run`-knappen.\n\n#### üí™ Uppgift 4.1\n\nK√∂r hela filen stock.R genom att anv√§nda `Source`-knappen. Unders√∂k vilket v√§rde variabeln `kapital` i Console har efter att filen k√∂rts genom att skriva `kapital` f√∂ljt av Enter.\n\n#### üí™ Uppgift 4.2\n\nDu kanske m√§rkte att inte mycket h√§nde i Console n√§r du klickade p√• `Source` - knappen. Det mest h√§nde liksom bakom scenen, d√§r kommandona i Editorn skickades √∂ver till Console. Vi skulle kanske vilja att v√•r kod skrev upp `kapital` i Console efter att alla r√§nta-p√•-r√§nta ber√§kningar gjorts. Prova att l√§gga till en rad i slutet av din kod med kommandot `print` och variabelns namn som du √§r intresserad av, dvs `print(kapital)`. Klicka p√• `Source` - knappen igen och verifiera att v√§rdet 111.936 skrivs ut i Console.\n\n#### üí™ Uppgift 4.3\n\nK√∂r kommandot p√• rad 1 i stock.R genom att anv√§nda `Run`-knappen. Unders√∂k vilket v√§rde variabeln `kapital` i Console. Upprepa detta f√∂r de resterande raderna i stock.R.\n\n## 5. St√§lla in arbetsmappen (working directory) i R\n\nHittills har vi skrivit alla kommandon och tal (t ex `kapital = 100`), dvs vi har matat in **data** sj√§lva. Det √§r naturligtvis klumpigt om man har mycket data. Vi vill kunna l√§sa in hela **datamaterialet** fr√•n en fil. H√§r √§r en Excel-fil med data fr√•n 5 √•rs investingar i aktier:\n\n![](ExcelTabellKapital.png){fig-align=\"center\" width=\"400\"}\n\nNotera att avkastningen (**returns**) anges i procent och √§r satt till noll under 2018 eftersom vi k√∂pte aktierna precis i b√∂rjan av √•r 2019 (s√§ger vi) och allts√• inte fick n√•gon avkastning under √•r 2018.\n\nExcel-filen har jag d√∂pt till *stock.xlsx*, men den kan d√∂pas till precis vad som helst.\n\n::: callout-warning\n### Variabelnamn som man ska undvika\n\nVi anv√§nder engelska namn p√• kolumnerna. √Ñven om svenska tecken √•√§√∂ g√•r att anv√§nda i kod, √§r det √§nd√• b√§st att undvika dem genom att skriva p√• engelska. Du kan inte anv√§nda mellanslag (space) i variabelnamn, och variabelnamn f√•r inte heller b√∂rja med siffror. Det finns ocks√• [vissa ord](https://rdrr.io/r/base/Reserved.html) som √§r reserverade och som inte f√•r/ska anv√§ndas som variabelnamn. Slutligen: R skiljer p√• sm√• och stora bokst√§ver. Variabeln `kapital` √§r allts√• inte samma som `Kapital`.\n:::\n\n::: callout-tip\n### What's in a name? Mer √§n du tror!\n\nOfta vill man ha ett variabelnamn som √§r l√§tt att f√∂rst√• vad variabeln inneh√•ller. Det √§r superviktigt f√∂r att andra ska kunna f√∂rst√• ens kod, men framf√∂rallt f√∂r att du sj√§lv ska kunna f√∂rst√• din egen kod om en vecka! ü•¥ Anv√§nd `_` (underscore) eller `.` (punkt) f√∂r att dela upp ord om det beh√∂vs. T ex `my_pretty_little_variable = 100`.\n:::\n\n::: column-margin\n[![](vintage-romeo-and-juliet-poster.jpg){width=\"60\"}](https://doorshakespeare.com/general/whats-in-a-name/)\n:::\n\nOm R ska kunna l√§sa in data fr√•n filen stock.xlsx s√• m√•ste vi tala om *var* filen finns p√• v√•r dator. Enklast √§r d√• att st√§lla in Rs **working directory**, dvs det standardst√§lle d√§r R letar efter filer i den p√•g√•ende sessionen. Det finns tv√• s√§tt att g√∂ra detta, varav vi endast rekommenderar det f√∂rsta om man √§r absolut nyb√∂rjare. R√§tt snart b√∂r du l√§ra dig att anv√§nda det andra s√§ttet, som √§r smidigare i l√§ngden.\n\n1.  **Working directory** √§r den mapp som R kommer leta efter filer i. √Ñndra din arbetsmapp (**working directory**) i R till samma mapp **SDA1** i **Documents** genom att v√§lja menyn [**S**]{.underline}**ession** och sen **Set [W]{.underline}orking Directory** och slutligen [**C**]{.underline}**hoose Directory...** och sedan klicka dig fram till mappen SDA1.\n\n![](setwd_menu.png){fig-align=\"center\" width=\"359\"}\n\n2.  F√∂r att slippa att klicka sig fram via menyer hela tiden s√• √§r det praktiskt att √§ndra working directory i b√∂rjan av den kodfil som man jobbar med. D√• kan man bara k√∂ra den kodfilen och working directory st√§lls in automatiskt. Kommandot `setwd` g√∂r samma sak som punkten 1 gjorde via menyerna. H√§r m√•ste vi dock veta **s√∂kv√§gen** (**path**) till mappen, dvs datorns s√§tt att hitta till mappen **SDA1**. S√§ttet att skriva s√∂kv√§gar p√• skiljer sig √•t p√• Windows/Mac/Linux. I dessa exempel antar jag att din SDA1 mapp √§r placerad i mappen Documents.\n\n    -   ![](mac.png){width=\"20\"} P√• en Mac skriver vi kommandot: `setwd('/Users/username/Documents/SDA1')` d√§r `username` ska ers√§ttas med ditt anv√§ndnamn p√• din Mac (namnet som kommer upp n√§r du loggar in p√• datorn). Notera de sm√• 'blipparna' kring filv√§gen i `setwd` kommandot.\n\n    -   ![](windows.png){width=\"15\"} P√• en Windows-dator skriver vi kommandot `setwd('C:/Documents/SDA1')`. Notera de sm√• 'blipparna' kring filv√§gen i `setwd` kommandot. \\[Windows-s√∂kv√§gar skrivs vanligtvis med backslash `\\`. I RStudio skriver man √§nd√• `/` f√∂r att matcha med Mac och Linux\\].\n\n    -   ![](linux.png){width=\"20\"} P√• en Linux-dator skriver vi kommandot `setwd('/home/username/Documents/SDA1')` d√§r `username` ska ers√§ttas med ditt anv√§ndnamn som anv√§nder n√§r du loggar in.\n\n#### üí™ Uppgift 5.1\n\nSt√§ll in din **SDA1** mapp som working directory i RStudio. Kontrollera att du lyckades genom att skriva kommandot `getwd()` i Console, som b√∂r skriva ut s√∂kv√§gen till din SDA1 mapp. Nu har du talat om f√∂r R att den ska leta efter filer i din kursmapp **SDA1**!\n\n## 6. L√§sa in data fr√•n fil\n\nVi vill nu l√§sa in data fr√•n Excelfilen stock.xlsx. Du kan ladda ner den filen [h√§r](https://github.com/StatisticsSU/SDA1/raw/main/datorlab/lab1/stock.xlsx). Beroende p√• din dator s√• kommer en av tv√• saker h√§nda:\n\n1.  filen stock.xlsx hamnar automatiskt i mappen **Downloads** (eller liknande) p√• din dator. Du f√•r d√• kopiera eller flytta filen till din working directory (din SDA1 mapp) genom att anv√§nda datorns filhanterare.\n\n2.  du f√•r v√§lja var du vill spara ner filen. Klicka dig fram till din working directory (din SDA1 mapp) och spara filen d√§r.\n\nR kommer nu att hitta filen och vi √§r redo att skriva kommandot som l√§ser in filen. Eftersom det √§r f√∂rsta g√•ngen du l√§ser in en Excel-fil i R beh√∂ver du g√∂ra lite grundjobb. Vi ska g√∂ra tre steg:\n\n1.  **Installera R-paketet** `openxlsx`. R kommer med ett antal baskommandon f√∂rinstallerat. T ex har vi redan anv√§nt **funktionen** `setwd()` f√∂r att tala om f√∂r R vilken mapp som √§r v√•r working directory. Men m√•nga kommandon/funktioner i R m√•ste laddas in via s k **R-paket**. Det finns R-paket f√∂r n√§stan allt man vill g√∂ra: l√§sa in data, g√∂r olika typer av statistiska analyser etc etc. Paketet `openxlsx` √§r specialiserat p√• att l√§sa in Excel-filer i R. F√∂r att installera paketet k√∂r vi kommandot `install.packages('openxlsx')` antingen genom att skriv in det i en kodfil och trycka p√• `Run` eller genom att skriva det direkt i terminalen. Efter det kommer R att skriva ut en massa mumbo-jumbo i Console som beskriver installationen. Paket kan ta n√•gon minut eller mer f√∂r att installera. Om inga fel uppst√•r brukar installationsmeddelandet avslutas med n√•got liknande:\\\n    `DONE (openxlsx)`\\\n    `The downloaded source packages are in`\\\n    f√∂ljt av n√•gon kryptisk s√∂kv√§g till st√§llet p√• din dator d√§r paketet har blivit installerat.\\\n    \\\n    Installation av paket beh√∂vs bara g√∂ras en g√•ng p√• din dator. Du beh√∂ver inte installera om n√§sta g√•ng du startar upp RStudio p√• nytt.\n\n::: column-margin\n<center>\n\n![](spotifypure.png){width=\"40\"}\n\n</center>\n\nPaketet [spotifyr](https://www.rcharlie.com/spotifyr/) kan t ex tala om f√∂r dig vilka dina fem mest spelade Spotify-l√•tar √§r. Se sidan [StrangeR things](https://rpubs.com/dbecker7/StrangeRThings) f√∂r andra mer eller mindre konstiga paket. Och, ja, det √§r vanligt med ett stort R i namnet p√• R-relaterade saker. N√∂rdaR, du vet.\n:::\n\n2.  **Ladda R-paketet** `openxlsx`. Kommandot `library(openxlsx)` laddar funktionerna i paketet `openxlsx` till R's arbetsminne. F√∂rst efter denna kommando kan vi anv√§nda funktionerna i paketet. Notera att vi beh√∂ver 'blippar' kring paketets namn n√§r vi installerar, men inte n√§r vi laddar paketet. Ett paket som laddats in med library finns inte tillg√§ngligt n√§r du start om RStudio. Du m√•ste allts√• skriva `library(openxlsx)` f√∂r varje ny session d√§r du vill l√§sa in Excel-filer. Det √§r d√§rf√∂r bra att skriva in `library(openxlsx)` i kodfilen du ska anv√§nda f√∂r att l√§sa in Excel-filer.\n\n3.  L√§s in data fr√•n Excel-filen genom kommandot/**funktionen** `read.xlsx`. H√§r hela kommandot (**funktionsanropet**):\\\n    `stockdata = read.xlsx('stock.xlsx', sheet = 1)`\\\n    Det √§r n√•gra saker att reda ut h√§r. F√∂rst, `read.xlsx()` √§r en **funktion** vilket betyder att det √§r ett kommando som **g√∂r n√•got** baserat p√• funktionens **input-argument**:\n\n    -   Det f√∂rsta argumentet `'stock.xlsx'` √§r en **textstr√§ng** (den har 'blippar') som talar om f√∂r `read.xlsx()` *vilken* Excelfil som ska l√§sas in. Vi beh√∂ver inte s√§ga mer eftersom denna fil ligger i v√•r working directory, som ju R nu k√§nner till.\n    -   det andra input-argumentet √§r `sheet = 1`, vilket s√§ger √•t `read.xlsx()` att data ligger i det f√∂rsta kalkylbladet i filen stock.xlsx. En Excelfil kan ju har flera kalkylblad, och vill man l√§sa det andra bladet √§ndrar man `1` till `2`. (men stock.xlsx har bara ett blad, s√• prova inte detta f√∂r d√• kommer R att klaga).\n\n    Men vad betyder `stockdata =` i b√∂rjan av kommandot ovan? Jo, om R ska l√§sa in data till arbetsminnet s√• m√•ste den ge denna data ett namn, vilket jag har valt till `stockdata` , men du f√•r d√∂pa den till (n√§stan) vad du vill. `stockdata` √§r en **variabel**, precis som `kapital` var en variabel tidigare. Variabeln `kapital` var en enkel form av en variabel som bara inneh√∂ll ett enda **v√§rde**, t ex 100 i b√∂rjan av v√•rt sparande. Variabeln `stockdata` √§r mer komplex. Den inneh√•ller en hel tabell med v√§rden. S√• kommandot\n\n    `stockdata = read.xlsx('stock.xlsx', sheet = 1)`\n\n    l√§ses allts√• av R som\n\n    > L√§s in f√∂rsta kalkylbladet av Excelfilen stock.xlsx till arbetsminnet och spara den inl√§sta tabellen som en tabell i variabeln `stockdata`.\n\nR har lite olika varianter av tabellvariabler. Den viktigaste f√∂r oss p√• den h√§r kursen √§r en s k `dataframe`. Du kan se att v√•r tabellvariabel `stockdata` faktiskt √§r en dataframe genom att skriva kommandot `class(stockdata)` i Console.\n\nN√§r man har l√§st in ett datamaterial √§r det bra att ta en snabbtitt p√• den inl√§sta tabellen f√∂r att se att den blev korrekt inl√§st. Precis som vi gjorde med variabel `kapital` f√∂r att se dess v√§rde (t ex 100) s√• kan skriva `stockdata` i Console f√∂r att se dess v√§rde (som ju √§r en tabell). Om man har en tabell med m√•nga rader s√• blir det fort jobbigt att skriva ut alla rader. Kommandot `head()` √§r d√• praktiskt, som bara skriver ut det f√∂rsta 6 raderna av tabellen. H√§r har vi alla kommandon som kr√§vs f√∂r att ladda in data och skriva ut fint p√• sk√§rmen (f√∂rutom `install.packages('openxlsx')` som jag antar att du redan har k√∂rt f√∂r att installera paketet).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(openxlsx)\nstockdata = read.xlsx('stock.xlsx', sheet = 1) # l√§ser in Excel data\nhead(stockdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  year  capital returns\n1 2018 100.0000    0.00\n2 2019 110.0000    0.10\n3 2020 116.6000    0.06\n4 2021 111.9360   -0.04\n5 2022 117.5328    0.05\n6 2023 125.7601    0.07\n```\n:::\n:::\n\n\n::: callout-note\n## Kommentarer\n\nI min kod ovan skrev jag `# l√§ser in Excel data` p√• en rad. All text som kommer *efter* tecknet `#` √§r en s k **kommentar** i R. Kommentarer ignoreras av R och √§r d√§rf√∂r ett bra s√§tt att skriva sm√• saker som g√∂r koden mer l√§ttl√§st. Du m√•ste ha ett `#` -tecken framf√∂r varje rad som du vill \"kommentera ut\".\n:::\n\n::: callout-tip\n### Ange s√∂kv√§g till filer som inte √§r i din Working directory\n\nIst√§llet f√∂r att placera alla filer i din working directory **SDA1** kan man ist√§llet ange s√∂kv√§gen till filen n√§r man l√§ser in den. Om jag t ex har sparat filen i mappen **Downloads** p√• en Windows-dator s√• skriver jag **\\\n**`stockdata = read.xlsx('C:/Downloads/stock.xlsx', sheet = 1)`\n:::\n\n#### üí™ Uppgift 6.1\n\nProva att ladda ner Excelfilen stock.xlsx och spara den i SDA1 mappen. L√§s sen in filen i R med kommandot `stockdata = read.xlsx('stock.xlsx', 1, colNames=TRUE)` . Skriv sen `head(stockdata)` i Console f√∂r att titta p√• data.\\\nProva nu att l√§sa in data med kommandot `stockdata = read.xlsx('stock.xlsx', 1, colNames=FALSE)` och notera skillnaden genom att √•terigen skriva `head(stockdata)` i Console.\n\n#### üí™ Uppgift 6.2\n\n√Ñndra v√§rdet p√• variabeln `returns` √•r 2023 till 0.05 i stockdata tabellen genom att skriva `stockdata[6,3] = 0.05` i Console. Det h√§r kommandot l√§ser R som:\n\n> V√§rdet i tabellen `stockdata` p√• rad 6 och kolumn 3 ska √§ndras till (tilldelas) v√§rdet 0.05.\n\nProva att skriva `stockdata` i Console f√∂r att kontrollera att v√§rdet faktiskt √§ndrades.\n\n#### üí™ Uppgift 6.3\n\nSpara den √§ndrade stockdata-tabellen till disk genom att skriva f√∂ljande kommando i Console:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsave(stockdata, file=\"stockdata2.Rdata\")\n```\n:::\n\n\nvilket sparar den √§ndrade `stockdata` tabellen till filen `stockdata2.Rdata` i din working directory (**SDA1**-mappen). Filformatet `Rdata` √§r R's eget filformat. Du kan i en senare session l√§sa in stockdata enkelt genom kommandot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload(\"stockdata2.Rdata\")\n```\n:::\n\n\nvilket kommer l√§sa in tabellen `stockdata` i R's arbetsminne.\n\n::: callout-tip\n## L√§sa in data fr√•n andra filformat √§n Excel\n\nDatamaterial kan ocks√• komma fr√•n rena textfiler (`.txt`) och s k `csv` filer. Se [reading data from a file](../../tutorials/ReadingDataFromFile/ReadingDataFromFile.qmd).\n:::\n\n## 7. Analysera data\n\nN√§r du har l√§st in datamaterialet i minnet s√• √§r det dags att analysera det. L√•t oss g√∂ra en enkel graf av variabeln `capital` √∂ver √•ren (`year`):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(capital ~ year, data = stockdata)\n```\n\n::: {.cell-output-display}\n![](DatorLab1_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nH√§r har vi anv√§nt funktionen `plot()` med tv√• argument. Argumentet `capital ~ year` talar om f√∂r `plot()` att den ska g√∂ra en graf ('plotta') variabeln capital p√• y-axeln och variabeln year p√• x-axeln. Vi s√§ger att vi 'plottar capital **mot** year'. Men `capital` och `year` √§r faktiskt inte variabler i Rs arbetsminne. D√§r finns bara en tabell (dataframe) som heter `stockdata` med kolumner som heter `capital` och `year`. S√• vi m√•ste tala om f√∂r `plot()` att vi vill h√§mta variablerna `capital` och `year` fr√•n datamaterialet/tabellen/dataframe `stockdata`, vilket √§r precis vad som h√§nder i det andra argumentet `data = stockdata`. Tecknet **\\~** brukar l√§sa som **tilde** och kan skrivas genom tangenterna `Alt gr` och tangenten till v√§nster om `Enter`.\\\nS√• kommandot\\\n\\\n`plot(capital ~ year, data = stockdata)`\\\n\\\nl√§ses av R som\n\n> plotta variabeln `capital` mot variabeln `year`, d√§r b√•de dessa variabler √§r kolumner i datamaterialet `stockdata`.\n\nOm vi vill ber√§kna medelv√§rdet p√• en variabel kan vi anv√§nda funktionen `mean()`. Men om vi vill ber√§kna medelv√§rdet av variabeln `capital` med kommandot `mean(capital)` s√• f√•r vi problemet att R inte har en variabel `capital` i minnet; `capital` √§r ju bara en kolumn i datamaterialet `stockdata`. Hur s√§ger vi till R: g√∂r om kolumnen `capital` i datamaterialet `stockdata` till en egen variabel och ber√§kna dess medelv√§rde (mean p√• engelska). L√∂sningen att anv√§nda `$`-tecknet f√∂r att plocka ut kolumnen `returns` som en egen variabel: `stockdata$capital` och sen anv√§nda `mean()` funktionen. Vi kan g√∂ra detta p√• samma kodrad och skriva ut resultatet:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncapital = mean(stockdata$capital)\ncapital\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 113.6381\n```\n:::\n:::\n\n\nKodraden mean`capital = mean(stockdata$capital)` s√§ger allts√• till R att\n\n> Plocka ut kolumnen `capital` fr√•n datamaterialet `stockdata` och ber√§kna dess medelv√§rde.\n\nGenom att explicit plocka ut kolumner p√• detta s√§tt kan vi g√∂ra grafen med ett lite annorlunda kommando:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(x = stockdata$year, y = stockdata$capital)\n```\n\n::: {.cell-output-display}\n![](DatorLab1_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nd√§r vi inte l√§ngre m√•ste anv√§nda argumentet `data = stockdata` f√∂r att tala om var dessa variabler kommer fr√•n. Men det f√∂rra kommandot `plot(capital ~ year, data = stockdata)` √§r nog √§nd√• mer l√§ttl√§st, tycker jag.\n\n#### üí™ Uppgift 7.1\n\nL√§s √•terigen in data med `stockdata = read.xlsx('stock.xlsx', sheet = 1)`. G√∂r en graf d√§r du plottar variabeln `returns` mot `year`.\n\nH√§r √§r hela koden i ett stycke:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetwd('/home/mv/Dropbox/Teaching/SDA1/datorlab/lab1') # I have a Linux computer and my data is in this path\nlibrary(openxlsx)                         \nstockdata = read.xlsx('stock.xlsx', sheet = 1)\nstockdata = data.frame(stockdata)\nmeancapital = mean(stockdata$capital)\nplot(capital ~ year, data = stockdata)\n```\n\n::: {.cell-output-display}\n![](DatorLab1_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nNotera att vi kan skriva **kommentarer** i koden genom tecknet `#` innan kommentaren. Allt efter tecknet `#` ignoreras av R n√§r den l√§ser koden. Det kan vara ett bra s√§tt att f√∂rklara en kodrad f√∂r anv√§ndaren.\n\n## 8. N√•gra extra tips\n\n-   Om du trycker p√• 'pil-upp' ‚çê tangenten i Console s√• kan du stega dig tillbaka till **gamla kommandon** som du har skrivit.\n-   Om du vill **st√§da upp i Console** kan du skriva `Ctrl + l` f√∂r att rensa Console fr√•n text (dvs ett litet L). Dina variabler blir kvar i arbetsminnet.\n-   **History**-fliken uppe till h√∂ger i RStudio visar alla tidigare kommandon.\n-   **Environment**-filken uppe till h√∂ger i RStudio ger dig information om de datamaterial och variabler som R har i arbetsminnet. Prova genom att definiera en ny variabel `c=100` i Console och hur den dyker upp i **Environment**-fliken. Prova att klicka p√• den bl√• pilen framf√∂r stockdata, du kommer se kolumnerna i det datamaterialet.\n-   **Files**-fliken nere till h√∂ger i RStudio √§r en inbyggd filhanterare. Den visar filerna i ditt working directory och du kan √§ven hantera filer d√§r (ta bort, d√∂pa om osv).\n-   I **Help**-fliken kan du s√∂ka p√• hj√§lp p√• olika kommandon. Prova att skriva in `mean`. Du kan √§ven f√• hj√§lp genom att skriva t ex `?mean` i Console.\n\n## 9. Datastrukturer\n\nR kan spara data i olika **datastrukturer**. Vi definerade tidigare variabeln `kapital` och tilldela denna variabel v√§rdet `100` genom kommandot `kapital = 100`.\n\nOfta vill man spara mer √§n ett tal i samma datastruktur. Ett s√§tt √§r att skapa en **vektor** med kommandot `c()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncapital_all_years = c(100,110,116.6,111.936,117.532,125.760)\n```\n:::\n\n\nDen nya variabel `capital_all_years` inneh√•ller allts√• kapitalet f√∂r alla √•r. Men om jag skulle vilja 'plocka ut' kapitalets v√§rde vid det tredje √•ret? D√• kan man indexera vektorn genom hakparenteser (brackets) `[]`, s√• h√§r:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncapital_all_years[3]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 116.6\n```\n:::\n:::\n\n\nMan kan ocks√• plocka ut flera v√§rden samtidigt, t ex √•r 3 och 5, med kommandot\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncapital_all_years[c(3,5)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 116.600 117.532\n```\n:::\n:::\n\n\nNotera att vi indexerade med en vektor, dvs vi anv√§nde `c()` kommandot eftersom vi vill tala om f√∂r R att plocka ut fler √§n ett v√§rde.\n\nVi har redan sett en av Rs viktigaste datatyper: en s k **dataframe**. En dataframe √§r en tabell med information om vad kolumnerna heter, och ibland √§ven vad raderna heter. Ett exempel √§r v√•r `stockdata` som √§r dataframe med tre kolumner: year, capital och stock. Vi kan se att det √§r en dataframe genom att anv√§nda kommandot `class()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(stockdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"data.frame\"\n```\n:::\n:::\n\n\nVi har faktiskt redan anv√§nt id√©en med att plocka ut v√§rden genom indexing in dataframes tidigare n√§r vi skrev `stockdata[6,3]` f√∂r att plocka ut v√§rdet p√• rad 6 och kolumn 3 i tabellen/dataframe. Och vi s√•g att vi ocks√• kunde √§ndra v√§rdena i tabellen genom tilldelning: `stockdata[6,3]=0.05` . Samma sak kan man g√∂ra med en vektor, t ex s√• g√∂r kommandot `capital_all_years[5] = 200` att vi √§ndrar kapitalet √•r 5 till 200 i v√•r vektor som inneh√•ller alla √•rs kapital.\n\nDet finns en annan slags tabell som kan vara bra att k√§nna till i R, en s k **matris** (eng. Matrix). Matriser √§r som dataframes, men inneh√•ller inte information om namnet p√• kolumnerna. √Ö andra sidan kan man g√∂ra matematiska ber√§kningar med hela matriser, men det √§r inget vi g√∂r p√• denna kurs. Anledningen till att vi n√§mner matriser h√§r √§r att man ibland m√•ste g√∂ra om en matris till en dataframe eller tv√§rtom. Vissa R-program vi bara jobba med dataframes och klagar om man f√∂rs√∂ker f√• det att jobba med en matris. L√•t oss skapa en matris som jag kallar `A` :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nA = matrix(c(11,2,4,5,62,3), 3, 2)\nA\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     [,1] [,2]\n[1,]   11    5\n[2,]    2   62\n[3,]    4    3\n```\n:::\n:::\n\n\nvilket √§r en matris (tabell) med 3 rader och 2 kolumner (som vi skapar fr√•n en vektor med 6 tal). Om vi anv√§nder `class()`-kommandot s√• ser vi att A mycket riktigt √§r en matrix, vilket √§r engelska f√∂r matris:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(A)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"matrix\" \"array\" \n```\n:::\n:::\n\n\nOm vi vill g√∂ra om en matris till en dataframe s√• anv√§nder vi kommandot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nB = as.data.frame(A)\nB\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  V1 V2\n1 11  5\n2  2 62\n3  4  3\n```\n:::\n:::\n\n\nd√§r R best√§mmer att kolumnerna ska heta V1 och V2 (en dataframe m√•ste ha namn p√• kolumnerna i tabellen). B √§r allts√• nu en dataframe, vilket man kan testa genom:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(B)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"data.frame\"\n```\n:::\n:::\n\n\nEn annan viktigt datatyp vi vill n√§mna √§r en s k **str√§ng** (eng. string), vilket kallas f√∂r `character` i R och √§r en variabel som inneh√•ller text. V√§rdet p√• en str√§ng-variabel skriv innanf√∂r citattecken:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmittnamn = \"mattias\"\nclass(mittnamn)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"character\"\n```\n:::\n:::\n\n\nMan kan √§ven anv√§nda enkla 'blippar' kring str√§ngens v√§rde, dvs `mittnamn = 'mattias'`.\n\nOm vi t ex anv√§nder `names()` kommandot p√• v√•r `stockdata` dataframe s√• f√•r vi en vektor med str√§ngar (en vektor eftersom det finns fler √§n ett kolumnnamn i `stockdata`):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(stockdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"year\"    \"capital\" \"returns\"\n```\n:::\n:::\n\n\nSlutligen finns datatypen `list` i R. En list (eller lista p√• svenska) √§r en vektor p√• steroider. En vanlig vektor m√•ste inneh√•lla *data av samma sort*, t ex en vektor med numeriska tal `x = c(1,4,5)` eller en vektor med str√§ngar (text): `c(\"mattias\",\"adam\",\"elma\")` . En lista √§r mer generell och kan inneh√•lla data av olika sort:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_list = list(a = 2, b = \"hej\", d = c(4,5,2))\nmy_list\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$a\n[1] 2\n\n$b\n[1] \"hej\"\n\n$d\n[1] 4 5 2\n```\n:::\n:::\n\n\nJag kan d√∂pa elementen i listan vad jag vill, h√§r kallade jag dem `a`, `b` och `d` (jag vill undvika bokstaven c eftersom det √§r symbolen f√∂r att skapa vektorer). Notera att elementet `a` inneh√•ller ett enda tal, `b` en str√§ng och `d` en vektor med tre tal. I utskriften ser man ocks√• att det olika listelementen med ett \\$-tecken framf√∂r. F√∂r att t ex plocka ut listelementet `d` kan man n√§mligen skriva\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_list$d\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 4 5 2\n```\n:::\n:::\n\n\nK√§nns det bekant med \\$-tecken f√∂r att plocka ut saker? Vi har redan sett att man kan plocka ut en kolumn i en dataframe (tabell) genom att skriva t ex `stockdata$returns` . En dataframe √§r n√§mligen egentligen en slags lista.\n\n::: callout-tip\n### Hitta l√§tt bland alla fickor\n\nOm du skriver `my_list$` (inklusive \\$-tecknet) i Console kommer det att dyka upp en lista med alla element som finns i listan `my_list`. Anv√§nd pil-tangenterna (upp och ned) f√∂r att v√§lja det element du √§r intresserad av och tryck Enter. ü§©\n:::\n\nVi ska slutligen presentera ytterligare en viktig datatyp i R: `factor`. Prova att skriva in kommandot `str(stockdata)` i Console. Kommandot returnerar variablernas namn och datatyper, vilket ju √§r `numeric` f√∂r alla v√•ra tre kolumner `year`, `capital` och `returns` i tabellen. Men tabellkolumner kan best√• av bokst√§ver (str√§ngar) eller **kategoriska variabler** (t ex `man` och `kvinna`). Kategoriska variabler kallas f√∂r **faktorvariabler** i R.\n\nR har ett antal inbyggda datamaterial, t ex datamaterialet `warpbreaks` som inneh√•ller information om antalet fel (`breaks`) vid v√§vning f√∂r tv√• olika typer av garn (`wool`) och tre olika sp√§nningar av v√§vstolen (`tension`). Vi b√∂rjar med att tilldela datamaterialet till variabeln garndata genom att skriva `garndata = warpbreaks` i Console. Skriv `head(garndata)` f√∂r en snabb titt p√• de f√∂rsta observationerna. Som du ser √§r `breaks` en numerisk variabel (eller snarare en kolumn in tabellen), men b√•de `wool` och `tension` √§r kategoriska faktorvariabler (`wool` kan bara vara av garntyp `A` eller `B`, och tension kan vara l√•g (`L`), mellan (`M`) eller h√∂g (`H`)). Vi kan se detta mer exakt genom att skriva `str(garndata)` i Console:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngarndata = warpbreaks\nstr(garndata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t54 obs. of  3 variables:\n $ breaks : num  26 30 54 25 70 52 51 26 67 18 ...\n $ wool   : Factor w/ 2 levels \"A\",\"B\": 1 1 1 1 1 1 1 1 1 1 ...\n $ tension: Factor w/ 3 levels \"L\",\"M\",\"H\": 1 1 1 1 1 1 1 1 1 2 ...\n```\n:::\n:::\n\n\nd√§r vi ser att `wool` √§r en faktorvariabel med tv√• olika v√§rden (**levels**, eller **niv√•er** p√• svenska), medan `tension` har tre niv√•er. Vi ser √§ven att `breaks` √§r en numerisk variabel. Vi kan √§ven se denna information i den √∂vre h√∂gra panelen i R under fliken **Environment** genom att klicka p√• den lilla pilen p√• `garndata`.\n\n![](environmentR.png){fig-align=\"center\" width=\"503\"}\n\n## 10. Funktioner\n\nVi har sett id√©n med funktioner tidigare: en funktion *g√∂r* n√•got med data. I matematikens v√§rld √§r en funktion $f$ en slags maskin som anv√§nder en **input** $x$, g√∂r n√•gra matematiska ber√§kningar, och ger tillbaka en **output** $y$. Vi brukar skriva funktionen som $y=f(x)$.\n\nEn funktion i R √§r en liknande sak: den anv√§nder ett eller flera inputs och ger tillbaka ett eller flera outputs. Det kan handla om ren matematisk funktion, som kvadratroten $\\sqrt{x}$ av ett tal $x$, vilket i R ber√§knas av funktionen `sqrt`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx = 4\ny = sqrt(x)\ny\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2\n```\n:::\n:::\n\n\nmen det kan ocks√• vara n√•got mer komplicerat som t ex att l√§sa in data fr√•n en Excel-fil:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstockdata = read.xlsx('stock.xlsx', sheet = 1)\n```\n:::\n\n\nd√§r `read.xlsx` √§r en funktion som tre input-argument filnamn (som en str√§ng!), talet 1 f√∂r att vi vill l√§sa det f√∂rsta bladet. Funktionen `read.xlsx` ger tillbaka en (tibble) dataframe som output med data.\n\nDet fina med programmeringsspr√•k √§r att man kan **skapa egna funktioner** som g√∂r just det jobb som man beh√∂ver. Om jag t ex vill skapa en funktion som ber√§knar r√§nta-p√•-r√§nta effekten p√• ett sparkapital (med samma r√§nta varje √•r) s√• kan jag skriva ihop f√∂ljande funktion:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncapital_interest <- function(capital, interest, years){\n  newcapital = capital*interest^years\n  return(newcapital)\n}\n```\n:::\n\n\nN√•gra saker att notera:\n\n-   Man anv√§nder alltid ordet `function` d√§r att definiera en funktion.\n\n-   Funktionens input-argument skrivs inom parenteser. Vilka namn du v√§ljer √§r helt fritt, men det m√•ste vara samma variabelnamn som du sedan anv√§nder innanf√∂r de s k m√•svingarna `{}` som inneh√•ller den faktiska koden som g√∂r jobbet.\n\n-   Funktionen tilldelas en variabel som jag gett namnet `capital_interest` , vilket √§r ett namn du v√§ljer helt sj√§lv.\n\n-   Koden anv√§nder r√§nta-p√•-r√§nta formeln $capital\\cdot interest^{years}$ , dvs r√§ntan, angett som 1.1 om du f√•r 10% r√§nta, upph√∂js i antal sparande√•r. Upph√∂jt skrivs som `^` i R.\n\n-   Funktionen avslutar med ordet `return` och den variabel du vill att funktionen ska ge tillbaka som output.\n\nOm jag sen vill anv√§nda min funktion f√∂r att se hur min hundring p√• banken kommer att utvecklas under 20 √•r med 5% r√§nta s√• skriver jag (jag **anropar** funktionen):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_money = capital_interest(100, 1.05, 20)\nmy_money\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 265.3298\n```\n:::\n:::\n\n\nVi sa ovan att vi tilldelade variabeln `capital_interest` en funktion. ü§Ø Wait, what? Jo, faktiskt, om vi unders√∂ker vilken typ av variabel `capital_interest` √§r s√• √§r det faktiskt en funktion:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(capital_interest)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"function\"\n```\n:::\n:::\n\n\nN√§r vi skrev variabel `kapital` i Console skrev den ut v√§rdet, t ex 100. Vad h√§nder om vi g√∂ra samma sak med v√•r funktionsvariabel `capital_interest` ? Hela funktionen skrivs ut som text!\n\n\n::: {.cell}\n\n```{.r .cell-code}\n capital_interest \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nfunction(capital, interest, years){\n  newcapital = capital*interest^years\n  return(newcapital)\n}\n```\n:::\n:::\n\n\nVi kommer inte att skriva egna funktioner p√• kursen. Men du kommer att anv√§nda funktioner. Och d√• kan det vara bra att veta att n√•gon har skrivit dessa funktioner p√• precis det s√§tt som vi skapade funktionen `capital_interest` ovan.\n\nEn sista sak: vissa funktioner har inga inputargument och ibland inte heller n√•gra outputs. Det betyder inte att funktionen inte g√∂r n√•got, utan den har ist√§llet vissa sido-effekter som inte alltid syns. `setwd` √§r t ex funktion som har s√∂kv√§gen som input, men har inga output, men d√§remot sidoeffekten att √§ndra working directory. Funktionen `getwd()` har inga input-argument men ger tillbaka din nuvarande working directory som output.\n\n## 11. Tre dialekter av R\n\nMan kan dela upp R's spr√•k i tre slags dialekter, dvs tre olika kommandon (syntax) f√∂r att g√∂ra ungef√§r samma sak:\n\n-   **Base-R** - den ursprungliga syntaxen in R\n-   **Formula syntax** - syntax som via paketet `Mosaic` har utvecklats f√∂r undervisning i statistik\n-   **Tidyverse** - en modern syntax utvecklat av personerna bakom RStudio.\n\n<center>\n\n[![](../../misc/hexagons/figs/base_r_hexagon.svg){width=\"60\"}](../../R/cheatsheets/base-r_cheat_sheet.pdf)¬† [![](../../misc/hexagons/figs/mosaic_hexagon.svg){width=\"60\"}](../../R/cheatsheets/mosaic_cheatsheet_gf.pdf)¬† [![](../../misc/hexagons/figs/tidyverse_hexagon.svg){width=\"60\"}](../../R/cheatsheets/ggplot2_cheatsheet.pdf)\n\n</center>\n\n<br>\n\nI SDA1 kommer vi f√∂rs√∂ka anv√§nda Formula syntax som mycket som m√∂jligt, med inslag av Base-R. Tidyverse-kod kan ofta vara extremt effektiv, men tar f√∂r l√•ng tid att l√§ra sig p√• en grundkurs i statistik. Vi kommer dock d√• och d√• att visa hur man g√∂r samma sak i de olika dialekterna, men p√• ett s√§tt som inte st√∂r fl√∂det f√∂r den student som helst vill h√•lla sig till ett s√§tt. Vi anv√§nder ikoner som du som student kan klicka p√• f√∂r att se ett kommando i olika dialekter. H√§r √§r ett exempel (prova att klicka ikonerna i h√∂ger-marginalen):\n\nI Formula syntax har vi redan sett att vi kan g√∂ra en scatter plot med kommandot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(mpg ~ hp, data = mtcars, main = \"Cars fuel usage\")\n```\n\n::: {.cell-output-display}\n![](DatorLab1_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n::: column-margin\n[![](../../misc/hexagons/figs/base_r_hexagon.svg){width=\"60\"}](../../R/BaseRSyntax.qmd#scatter-plot) [![](../../misc/hexagons/figs/tidyverse_hexagon.svg){width=\"60\"}](../../R/TidyverseSyntax.qmd#scatter-plot)\n:::\n\nOm man vill ha plottar som liknar de fina plottarna i Tidyverse, men forts√§tta att skriva den enklare formula-syntaxen s√• kan man anv√§nda paketet `ggformula`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggformula)\ngf_point(mpg ~ hp, data = mtcars, title = \"Cars fuel usage\")\n```\n\n::: {.cell-output-display}\n![](DatorLab1_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n## 12. Sammanfattning\n\n::: callout-info\n## I den h√§r laborationen har du l√§rt dig:\n\n-   Anv√§nda R som en minir√§knare.\n\n-   Anv√§nda variabler som ett s√§tt att spara v√§rden i en session.\n\n-   S√§tta working directory s√• R kan hitta dina filer.\n\n-   Skriva kod b√•de i Console och Editorn.\n\n-   L√§sa in data fr√•n fil och g√∂ra inledande grafer och medelv√§rdeber√§kningar f√∂r dataanalys.\n\n-   Vi har ocks√• tittat p√• datastrukturer i R och t o m nosat lite p√• funktioner i R.\n:::\n\n<br><br>\n\n::: callout-note\n### End of the line\n\nOm du har kommit hit utan att slita ditt h√•r alltf√∂r m√•nga g√•nger s√• tycker jag att du ska vara v√§ldigt n√∂jd med dig sj√§lv. Du har redan l√§rt dig massor om R. Ditt framtida jag kommer att tacka dig!\n\nTa nu en ‚òï och en üç∞ f√∂r att fira!\n:::\n\n![https://devcamp.com/site_blogs/top-5-programming-memes](states-of-a-programmer.png){fig-align=\"center\" width=\"550\"}\n",
    "supporting": [
      "DatorLab1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}